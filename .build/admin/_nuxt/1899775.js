(window.webpackJsonp=window.webpackJsonp||[]).push([[8,7,9,10,11,12,13,14,19,20,22],{801:function(e,t,n){"use strict";n.r(t);n(20),n(12),n(25),n(38),n(39);var l=n(7),o=n(8),r=n(295),c=(n(63),n(471),n(13),n(113),n(294),n(199),n(81),n(472),n(804)),d=n(802),f=n(76),h=n(799);function m(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function v(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(Object(source),!0).forEach((function(t){Object(l.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):m(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var y={name:"SelectEntity",components:{SelectEntityOption:c.default,CustomElSelect:d.default},props:{value:{type:[String,Number,Array,Object]},service:{type:f.b},defaultOptions:{type:Array,default:function(){return[]}},method:{type:String,default:"list"},payload:{type:Object,default:function(){return{query:{},search:"",page:1,pageSize:10,total:0,exact:!0}}},selectProps:{type:Object,default:function(){return{}}},valueKey:{type:String,default:"id"},labelKey:{type:String,default:"name"},limit:{type:Number,default:1},crud:{type:Object,default:function(){return{create:!1,edit:!1,delete:!1}}},transform:{type:[Object,String],validator:function(e){console.log(e)}},filterDataMethod:{type:Function},clearable:{type:Boolean,default:!0}},data:function(){return{data:[],fetching:!1,selectedValues:[],selectedOptions:[],oldSelectedValues:[]}},computed:{_value:{get:function(){var e;return null!==(e=this.transform)&&void 0!==e&&e.get?this.transform.get(this.value,this):this.value},set:function(e){var t;if(null!==(t=this.transform)&&void 0!==t&&t.set)return this.$emit("input",this.transform.set(e,this));this.$emit("input",e||null)}},listOptions:function(){var e,t=this,map={},data=[];return(e=this.defaultOptions||[]).concat.apply(e,Object(r.a)(this.selectedOptions).concat(Object(r.a)(this.data))).forEach((function(e){return h.b.pushIfNotExists(data,map,e,t.valueKey)})),this.filterDataMethod&&(data=this.filterDataMethod(data,this)),data},multiple:function(){return this.limit>1},setting:function(){return Object.assign({},this.selectProps)}},watch:{_value:{handler:function(e){var t=this;if(this.selectedValues.splice(0),e){e=Array.isArray(e)?e:[e];var map={};e.forEach((function(e){var n=t.listOptions.find((function(n){return h.a.get(n,t.valueKey)===e}));n&&h.b.pushIfNotExists(t.selectedValues,map,n,"id")}))}}}},created:function(){this.mapDefaultValue(),this.fetchData()},methods:{handleCreate:function(text,option){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n,l,o,r,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log("create",text),n=e.crud.create.service||e.service,l=e.crud.create.method||"create",o=n[l],r=v({data:{}},e.crud.create.payload||{}),h.a.set(r.data,e.crud.create.field||"name",text),t.next=9,o.call(n,e.$axios,r);case 9:c=t.sent,e.data.unshift(c),e.$nextTick((function(){e.$refs.select.selectOptionByValue(c.id)})),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),console.log("create new item error");case 17:case"end":return t.stop()}}),t,null,[[0,14]])})))()},handleChange:function(e){this.$emit("change",e)},filterMethod:function(text){this.payload.search=text,this.fetchData()},mapDefaultValue:function(){this.selectedValues=[],this.defaultChecked&&(this.limit>1?this.selectedValues=this.defaultChecked:this.selectedValues.push(this.defaultChecked)),this.oldSelectedValues=Object(r.a)(this.selectedValues)},fetchData:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n,l,o,c,d,data,f,m,y,_,k,x;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.service){t.next=3;break}return console.warn("select-entity no service"),t.abrupt("return");case 3:return e.fetching=!0,t.prev=4,l=v({page:1,pageSize:10,exact:!0},l=h.a.pick(e.payload,["query","page","pageSize","search","exact","populates","sort","select"])),t.next=9,e.service[e.method](e.$axios,l);case 9:o=t.sent,c=h.b.santizeResponse(o),d=c.data,data=void 0===d?[]:d,f=c.page,m=void 0===f?1:f,y=c.pageSize,_=void 0===y?10:y,k=c.total,x=void 0===k?0:k,(n=e.data).splice.apply(n,[0,e.data.length].concat(Object(r.a)(data))),e.payload.page=m,e.payload.pageSize=_,e.payload.total=x,t.next=20;break;case 17:t.prev=17,t.t0=t.catch(4),console.log("DataTable fetch data error",t.t0);case 20:e.fetching=!1;case 21:case"end":return t.stop()}}),t,null,[[4,17]])})))()}}},_=n(4),component=Object(_.a)(y,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("CustomElSelect",e._b({ref:"select",attrs:{filterable:"",clearable:e.clearable,"filter-method":e.filterMethod,multiple:e.limit>1,"multiple-limit":e.limit,loading:e.fetching,"allow-create":!!e.crud.create,"default-first-option":!!e.crud.create},on:{change:e.handleChange,create:e.handleCreate},model:{value:e._value,callback:function(t){e._value=t},expression:"_value"}},"CustomElSelect",e.setting,!1),e._l(e.listOptions,(function(t,l){return n("SelectEntityOption",{key:e._.get(t,e.valueKey)||t.id||l,attrs:{value:e._.get(t,e.valueKey),label:e._.get(t,e.labelKey)}},[e._t("item",null,{item:t,context:this})],2)})),1)}),[],!1,null,"7d0a462f",null);t.default=component.exports;installComponents(component,{SelectEntityOption:n(804).default,CustomElSelect:n(802).default})},802:function(e,t,n){"use strict";n.r(t);n(64),n(294),n(199);var l={extends:n(34).Select,methods:{handleOptionSelect:function(option,e){var t=this;if(this.multiple){var n=(this.value||[]).slice(),l=this.getValueIndex(n,option.value);l>-1?n.splice(l,1):(this.multipleLimit<=0||n.length<this.multipleLimit)&&n.push(option.value),this.$emit("input",n),this.emitChange(n),option.created&&(this.query="",this.handleQueryChange(""),this.inputLength=20),this.filterable&&this.$refs.input.focus()}else option.created&&(this.query="",this.handleQueryChange(""),this.inputLength=20),this.$emit("input",option.value),this.emitChange(option.value),this.visible=!1;this.isSilentBlur=e,this.setSoftFocus(),this.visible||this.$nextTick((function(){t.scrollToOption(option)}))},selectOption:function(){this.visible?this.options[this.hoverIndex]&&(this.options[this.hoverIndex].created&&this.$emit("create",this.query,this.options[this.hoverIndex]),this.handleOptionSelect(this.options[this.hoverIndex])):this.toggleMenu()},selectOptionByValue:function(e){var option=this.cachedOptions.find((function(option){return option.value===e}));option&&this.handleOptionSelect(option)}}},o=n(4),component=Object(o.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleClose,expression:"handleClose"}],staticClass:"el-select",class:[e.selectSize?"el-select--"+e.selectSize:""],on:{click:function(t){return t.stopPropagation(),e.toggleMenu(t)}}},[e.multiple?n("div",{ref:"tags",staticClass:"el-select__tags",style:{"max-width":e.inputWidth-32+"px",width:"100%"}},[e.collapseTags&&e.selected.length?n("span",[n("el-tag",{attrs:{closable:!e.selectDisabled,size:e.collapseTagSize,hit:e.selected[0].hitState,type:"info","disable-transitions":""},on:{close:function(t){return e.deleteTag(t,e.selected[0])}}},[n("span",{staticClass:"el-select__tags-text"},[e._v("\n          "+e._s(e.selected[0].currentLabel)+"\n        ")])]),e._v(" "),e.selected.length>1?n("el-tag",{attrs:{closable:!1,size:e.collapseTagSize,type:"info","disable-transitions":""}},[n("span",{staticClass:"el-select__tags-text"},[e._v("+ "+e._s(e.selected.length-1))])]):e._e()],1):e._e(),e._v(" "),e.collapseTags?e._e():n("transition-group",{on:{"after-leave":e.resetInputHeight}},e._l(e.selected,(function(t){return n("el-tag",{key:e.getValueKey(t),attrs:{closable:!e.selectDisabled,size:e.collapseTagSize,hit:t.hitState,type:"info","disable-transitions":""},on:{close:function(n){return e.deleteTag(n,t)}}},[n("span",{staticClass:"el-select__tags-text"},[e._v(e._s(t.currentLabel))])])})),1),e._v(" "),e.filterable?n("input",{directives:[{name:"model",rawName:"v-model",value:e.query,expression:"query"}],ref:"input",staticClass:"el-select__input",class:[e.selectSize?"is-"+e.selectSize:""],style:{"flex-grow":"1",width:e.inputLength/(e.inputWidth-32)+"%","max-width":e.inputWidth-42+"px"},attrs:{type:"text",disabled:e.selectDisabled,autocomplete:e.autoComplete||e.autocomplete},domProps:{value:e.query},on:{focus:e.handleFocus,blur:function(t){e.softFocus=!1},keyup:e.managePlaceholder,keydown:[e.resetInputState,function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:(t.preventDefault(),e.navigateOptions("next"))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:(t.preventDefault(),e.navigateOptions("prev"))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.selectOption(t))},function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;t.stopPropagation(),t.preventDefault(),e.visible=!1},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"delete",[8,46],t.key,["Backspace","Delete","Del"])?null:e.deletePrevTag(t)},function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"tab",9,t.key,"Tab"))return null;e.visible=!1}],compositionstart:e.handleComposition,compositionupdate:e.handleComposition,compositionend:e.handleComposition,input:[function(t){t.target.composing||(e.query=t.target.value)},e.debouncedQueryChange]}}):e._e()],1):e._e(),e._v(" "),n("el-input",{ref:"reference",class:{"is-focus":e.visible},attrs:{id:e.id,type:"text",placeholder:e.currentPlaceholder,name:e.name,autocomplete:e.autoComplete||e.autocomplete,size:e.selectSize,disabled:e.selectDisabled,readonly:e.readonly,"validate-event":!1,tabindex:e.multiple&&e.filterable?"-1":null},on:{focus:e.handleFocus,blur:e.handleBlur},nativeOn:{keyup:function(t){return e.debouncedOnInputChange(t)},keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:(t.stopPropagation(),t.preventDefault(),e.navigateOptions("next"))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:(t.stopPropagation(),t.preventDefault(),e.navigateOptions("prev"))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.selectOption(t))},function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;t.stopPropagation(),t.preventDefault(),e.visible=!1},function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"tab",9,t.key,"Tab"))return null;e.visible=!1}],paste:function(t){return e.debouncedOnInputChange(t)},mouseenter:function(t){e.inputHovering=!0},mouseleave:function(t){e.inputHovering=!1}},model:{value:e.selectedLabel,callback:function(t){e.selectedLabel=t},expression:"selectedLabel"}},[e.$slots.prefix?n("template",{slot:"prefix"},[e._t("prefix")],2):e._e(),e._v(" "),n("template",{slot:"suffix"},[n("i",{directives:[{name:"show",rawName:"v-show",value:!e.showClose,expression:"!showClose"}],class:["el-select__caret","el-input__icon","el-icon-"+e.iconClass]}),e._v(" "),e.showClose?n("i",{staticClass:"el-select__caret el-input__icon el-icon-circle-close",on:{click:e.handleClearClick}}):e._e()])],2),e._v(" "),n("transition",{attrs:{name:"el-zoom-in-top"},on:{"before-enter":e.handleMenuEnter,"after-leave":e.doDestroy}},[n("el-select-menu",{directives:[{name:"show",rawName:"v-show",value:e.visible&&!1!==e.emptyText,expression:"visible && emptyText !== false"}],ref:"popper",attrs:{"append-to-body":e.popperAppendToBody}},[n("el-scrollbar",{directives:[{name:"show",rawName:"v-show",value:e.options.length>0&&!e.loading,expression:"options.length > 0 && !loading"}],ref:"scrollbar",class:{"is-empty":!e.allowCreate&&e.query&&0===e.filteredOptionsCount},attrs:{tag:"ul","wrap-class":"el-select-dropdown__wrap","view-class":"el-select-dropdown__list"}},[e.showNewOption?n("el-option",{attrs:{value:e.query,created:""}},[n("icon",{attrs:{name:"el-icon-plus"}}),e._v("\n          "+e._s(e.query)+"\n        ")],1):e._e(),e._v(" "),e._t("default")],2),e._v(" "),e.emptyText&&(!e.allowCreate||e.loading||e.allowCreate&&0===e.options.length)?[e.$slots.empty?e._t("empty"):n("p",{staticClass:"el-select-dropdown__empty"},[e._v("\n          "+e._s(e.emptyText)+"\n        ")])]:e._e()],2)],1)],1)}),[],!1,null,"2ed420cc",null);t.default=component.exports;installComponents(component,{Icon:n(198).default})},803:function(e,t,n){"use strict";n.r(t);var l={props:{to:String},data:function(){return{teleportTo:null}},watch:{to:function(){this.teleport()}},mounted:function(){this.teleport()},beforeDestroy:function(){this.removeTeleport()},methods:{teleport:function(){if(this.removeTeleport(),this.to&&(this.teleportTo=document.querySelector(this.to),this.teleportTo)){try{this.$parent.$el.removeChild(this.$el)}catch(e){}this.teleportTo.appendChild(this.$el)}},removeTeleport:function(){if(this.teleportTo)try{this.teleportTo.removeChild(this.$el)}catch(e){}}}},o=n(4),component=Object(o.a)(l,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"teleport"},[e._t("default")],2)}),[],!1,null,null,null);t.default=component.exports},804:function(e,t,n){"use strict";n.r(t);var l={extends:n(34).Option},o=n(4),component=Object(o.a)(l,undefined,undefined,!1,null,"0f4d31b3",null);t.default=component.exports},805:function(e,t,n){var content=n(813);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(33).default)("4849be56",content,!0,{sourceMap:!1})},806:function(e,t,n){var content=n(816);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(33).default)("0565f0ab",content,!0,{sourceMap:!1})},808:function(e,t,n){"use strict";n.r(t);var l=n(295),o=(n(13),{name:"TableFilter",props:{items:{type:Array,default:function(){return[]}}},data:function(){return{}},methods:{handleClear:function(){var data={};this.$refs.filterItems.forEach((function(e){e.mapDefaultValue(),data[e.path]=e})),this.close(),this.$emit("filter",data)},handleCancel:function(){this.$refs.filterItems.forEach((function(e){e.selectedValues=e.oldSelectedValues})),this.$refs.popover.doClose()},handleApply:function(){var data={};this.$refs.filterItems.forEach((function(e){e.oldSelectedValues=Object(l.a)(e.selectedValues),data[e.path]=e})),this.close(),this.$emit("filter",data)},handleFilterClick:function(e){e.popoverVisible||this.$refs.filterItems.forEach((function(t){t!==e&&t.$refs.popover.doClose()}))},close:function(){this.$refs.filterItems.forEach((function(e){e.$refs.popover.doClose()})),this.$refs.popover.doClose()}}}),r=n(4),component=Object(r.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-popover",{ref:"popover",attrs:{trigger:"click"}},[n("el-button",{attrs:{slot:"reference","icon-only":"",icon:"filter",type:"primary",size:"small"},slot:"reference"}),e._v(" "),n("div",{staticClass:"flex justify-between max-w-md"},[n("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-close"},on:{click:e.handleClear}},[e._v("\n      Clear\n    ")]),e._v(" "),n("span",{staticClass:"ml-4 flex"},[n("el-button",{attrs:{size:"small"},on:{click:e.handleCancel}},[e._v("Hủy")]),e._v(" "),n("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleApply}},[e._v("\n        Áp dụng\n      ")])],1)],1),e._v(" "),n("div",{staticClass:"list-filter-items",style:{margin:"0 -12px",marginTop:"12px"}},e._l(e.items,(function(t){return n("FilterItem",e._b({key:t.path,ref:"filterItems",refInFor:!0,on:{"reference-click":e.handleFilterClick}},"FilterItem",t,!1))})),1)],1)}),[],!1,null,"2aa59dbd",null);t.default=component.exports;installComponents(component,{FilterItem:n(817).default})},809:function(e,t,n){"use strict";n.r(t);var l={props:{icon:{type:String,default:"empty"},text:{type:String,default:"Không có dữ liệu"}}},o=n(4),component=Object(o.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"w-full flex justify-center items-center flex-col",staticStyle:{"min-height":"8rem"}},[n("icon",{staticClass:"text-5xl text-gray-500",attrs:{name:"empty"}}),e._v(" "),n("span",{staticClass:"text-gray-500"},[e._v(e._s(e.text))])],1)}),[],!1,null,"bdd897f8",null);t.default=component.exports;installComponents(component,{Icon:n(198).default})},810:function(e,t,n){"use strict";n.r(t);var l=n(7),o={props:{dateProps:{type:Object},field:{type:String},convert:{type:Function},default:{type:Date,default:Date.now()}},data:function(){return{value:this.default}},methods:{handleChange:function(e){this.$emit("filterDate",this.convert?this.convert(e):Object(l.a)({},this.path,e))}}},r=n(4),component=Object(r.a)(o,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("el-date-picker",e._b({on:{change:e.handleChange},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},"el-date-picker",e.dateProps,!1))}),[],!1,null,"7ff6ee7c",null);t.default=component.exports},811:function(e,t,n){"use strict";n.r(t);var l=n(823),o=n.n(l),r=(n(824),{components:{VueJsonPretty:o.a},props:{schema:{type:Object},fields:{type:Object},useSchema:{type:Boolean,default:!0},entity:{type:Object}}}),c=n(4),component=Object(c.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("vue-json-pretty",{attrs:{data:e.entity}})],1)}),[],!1,null,"2e7d4592",null);t.default=component.exports},812:function(e,t,n){"use strict";n(805)},813:function(e,t,n){var l=n(32)(!1);l.push([e.i,".filter-item-reference.is-active{background-color:#ecf5ff;color:#66b1ff}.no-padding-x{padding-left:0!important;padding-right:0!important}",""]),e.exports=l},814:function(e,t,n){var content=n(832);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(33).default)("5c3deda4",content,!0,{sourceMap:!1})},815:function(e,t,n){"use strict";n(806)},816:function(e,t,n){var l=n(32)(!1);l.push([e.i,".tox-notifications-container{display:none}.app-editor{display:inline-block}.app-editor .tox-toolbar__primary{background:#fff!important;border-bottom:1px solid #ccc!important}.app-editor .tox-toolbar__primary .tox-tbtn{height:var(--toolbar-size)}",""]),e.exports=l},817:function(e,t,n){"use strict";n.r(t);n(20),n(12),n(38),n(39);var l=n(7),o=n(8),r=n(295),c=(n(63),n(471),n(13),n(113),n(81),n(472),n(25),n(117),n(118),n(294),n(799)),d=n(76);function f(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function h(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?f(Object(source),!0).forEach((function(t){Object(l.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):f(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var m={props:{label:{type:String},path:{type:String},service:{type:d.b},defaultOptions:{type:Array,default:function(){return[]}},defaultChecked:{validator:function(){return!0}},placement:{type:String,default:"right"},limit:{type:Number,default:1},labelKey:{type:String,default:"name"},valueKey:{type:String,default:"id"},method:{type:String,default:"list"},payload:{type:Object,default:function(){return{query:{},page:1,pageSize:10}}},isActive:{type:Boolean,default:!1}},data:function(){return{data:[],fetching:!1,selectedValues:[],selectedOptions:[],oldSelectedValues:[],popoverVisible:!1,hasSearch:!1}},computed:{listOptions:function(){var e,t=this,map={},data=[];return(e=this.defaultOptions||[]).concat.apply(e,Object(r.a)(this.selectedOptions).concat(Object(r.a)(this.data))).forEach((function(e){return c.b.pushIfNotExists(data,map,e,t.valueKey)})),data},value:function(){return this.limit>1?this.selectedValues:this.selectedValues[0]},isEmpty:function(){return!this.value||(this.limit>1?0===this.value.length:!this.value)},isNoData:function(){return 0===this.listOptions.length}},created:function(){this.mapDefaultValue(),this.hasSearch="string"==typeof this.payload.search,this.fetchData()},methods:{mapDefaultValue:function(){this.selectedValues=[],this.defaultChecked&&(this.limit>1?this.selectedValues=this.defaultChecked:this.selectedValues.push(this.defaultChecked)),this.oldSelectedValues=Object(r.a)(this.selectedValues)},handleReferenceClick:function(){this.$emit("reference-click",this)},handlePageChange:function(e){this.payload.page=e,this.fetchData()},handleSearch:function(text){this.payload.search=text,this.fetchData()},fetchData:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n,l,o,d,f,data,m,v,y,_,k,x,w,C;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.fetching=!0,t.prev=1,e.selectedOptions=e.listOptions.filter((function(t){return e.selectedValues.includes(t[e.valueKey])})),l=h({page:1,pageSize:10,exact:!0},l=c.a.pick(e.payload,["query","page","pageSize","search","exact","populates","sort","select"])),t.next=7,e.service[e.method](e.$axios,l);case 7:o=t.sent,d=c.b.santizeResponse(o),f=d.data,data=void 0===f?[]:f,m=d.page,v=void 0===m?1:m,y=d.pageSize,_=void 0===y?10:y,k=d.total,x=void 0===k?0:k,w=d.totalPages,C=void 0===w?0:w,(n=e.data).splice.apply(n,[0,e.data.length].concat(Object(r.a)(data))),e.payload.page=v,e.payload.pageSize=_,e.payload.total=x,e.payload.totalPages=C,e.$nextTick((function(){var t;null===(t=e.$refs.popover)||void 0===t||t.updatePopper()})),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(1),console.log("DataTable fetch data error",t.t0);case 20:e.fetching=!1;case 21:case"end":return t.stop()}}),t,null,[[1,17]])})))()}}},v=(n(812),n(4)),component=Object(v.a)(m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-popover",{ref:"popover",attrs:{trigger:"click",placement:e.placement+"-start","popper-class":"no-padding-x"},model:{value:e.popoverVisible,callback:function(t){e.popoverVisible=t},expression:"popoverVisible"}},[n("li",{staticClass:"el-dropdown-menu__item flex justify-between filter-item-reference",class:{"flex-row-reverse":"right"===e.placement,"is-active":e.popoverVisible},attrs:{slot:"reference"},on:{click:e.handleReferenceClick},slot:"reference"},[n("icon",{staticClass:"my-auto",attrs:{name:"left"===e.placement?"el-icon-arrow-left":"el-icon-arrow-right"}}),e._v("\n    "+e._s(e.label)+"\n  ")],1),e._v(" "),n("div",{staticClass:"filter-item-content min-w-s"},[n("span",{staticClass:"text-base inline-block font-semibold px-12px mb-12px"},[e._v("\n      Lọc theo "+e._s(e.label)+"\n    ")]),e._v(" "),n("span",{staticClass:"mb-12px px-12px w-full flex"},[e.hasSearch?n("InputSearch",{attrs:{size:"small","search-on-focus":""},on:{focus:e.handleSearch,search:e.handleSearch}}):e._e()],1),e._v(" "),e.isNoData?n("empty",{directives:[{name:"loading",rawName:"v-loading",value:e.fetching,expression:"fetching"}]}):[n("el-scrollbar",{attrs:{"wrap-style":{maxHeight:"50vh"}}},[n("el-checkbox-group",{directives:[{name:"loading",rawName:"v-loading",value:e.fetching,expression:"fetching"}],staticClass:"flex flex-col",attrs:{max:e.limit},model:{value:e.selectedValues,callback:function(t){e.selectedValues=t},expression:"selectedValues"}},e._l(e.listOptions,(function(option,t){return n("el-checkbox",{key:option.id||t,staticClass:"px-12px el-dropdown-menu__item",staticStyle:{"margin-right":"0px",padding:"0 12px"},attrs:{label:e._.get(option,e.valueKey)}},[e._v("\n            "+e._s(e._.get(option,e.labelKey))+"\n          ")])})),1)],1),e._v(" "),n("el-pagination",{attrs:{"hide-on-single-page":"",small:"",layout:"prev, pager, next","page-size":e.payload.pageSize,"current-page":e.payload.page,total:e.payload.total},on:{"current-change":e.handlePageChange}})]],2)])}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{Icon:n(198).default,InputSearch:n(807).default,Empty:n(809).default})},818:function(e,t,n){"use strict";n.r(t);var l={name:"FormSelect",extends:n(34).Select,props:{selectOptions:{type:Array,default:function(){return[]}}}},o=n(4),component=Object(o.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleClose,expression:"handleClose"}],staticClass:"el-select",class:[e.selectSize?"el-select--"+e.selectSize:""],on:{click:function(t){return t.stopPropagation(),e.toggleMenu(t)}}},[e.multiple?n("div",{ref:"tags",staticClass:"el-select__tags",style:{"max-width":e.inputWidth-32+"px",width:"100%"}},[e.collapseTags&&e.selected.length?n("span",[n("el-tag",{attrs:{closable:!e.selectDisabled,size:e.collapseTagSize,hit:e.selected[0].hitState,type:"info","disable-transitions":""},on:{close:function(t){return e.deleteTag(t,e.selected[0])}}},[n("span",{staticClass:"el-select__tags-text"},[e._v("\n          "+e._s(e.selected[0].currentLabel)+"\n        ")])]),e._v(" "),e.selected.length>1?n("el-tag",{attrs:{closable:!1,size:e.collapseTagSize,type:"info","disable-transitions":""}},[n("span",{staticClass:"el-select__tags-text"},[e._v("+ "+e._s(e.selected.length-1))])]):e._e()],1):e._e(),e._v(" "),e.collapseTags?e._e():n("transition-group",{on:{"after-leave":e.resetInputHeight}},e._l(e.selected,(function(t){return n("el-tag",{key:e.getValueKey(t),attrs:{closable:!e.selectDisabled,size:e.collapseTagSize,hit:t.hitState,type:"info","disable-transitions":""},on:{close:function(n){return e.deleteTag(n,t)}}},[n("span",{staticClass:"el-select__tags-text"},[e._v(e._s(t.currentLabel))])])})),1),e._v(" "),e.filterable?n("input",{directives:[{name:"model",rawName:"v-model",value:e.query,expression:"query"}],ref:"input",staticClass:"el-select__input",class:[e.selectSize?"is-"+e.selectSize:""],style:{"flex-grow":"1",width:e.inputLength/(e.inputWidth-32)+"%","max-width":e.inputWidth-42+"px"},attrs:{type:"text",disabled:e.selectDisabled,autocomplete:e.autoComplete||e.autocomplete},domProps:{value:e.query},on:{focus:e.handleFocus,blur:function(t){e.softFocus=!1},keyup:e.managePlaceholder,keydown:[e.resetInputState,function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:(t.preventDefault(),e.navigateOptions("next"))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:(t.preventDefault(),e.navigateOptions("prev"))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.selectOption(t))},function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;t.stopPropagation(),t.preventDefault(),e.visible=!1},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"delete",[8,46],t.key,["Backspace","Delete","Del"])?null:e.deletePrevTag(t)},function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"tab",9,t.key,"Tab"))return null;e.visible=!1}],compositionstart:e.handleComposition,compositionupdate:e.handleComposition,compositionend:e.handleComposition,input:[function(t){t.target.composing||(e.query=t.target.value)},e.debouncedQueryChange]}}):e._e()],1):e._e(),e._v(" "),n("el-input",{ref:"reference",class:{"is-focus":e.visible},attrs:{id:e.id,type:"text",placeholder:e.currentPlaceholder,name:e.name,autocomplete:e.autoComplete||e.autocomplete,size:e.selectSize,disabled:e.selectDisabled,readonly:e.readonly,"validate-event":!1,tabindex:e.multiple&&e.filterable?"-1":null},on:{focus:e.handleFocus,blur:e.handleBlur},nativeOn:{keyup:function(t){return e.debouncedOnInputChange(t)},keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:(t.stopPropagation(),t.preventDefault(),e.navigateOptions("next"))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:(t.stopPropagation(),t.preventDefault(),e.navigateOptions("prev"))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.selectOption(t))},function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;t.stopPropagation(),t.preventDefault(),e.visible=!1},function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"tab",9,t.key,"Tab"))return null;e.visible=!1}],paste:function(t){return e.debouncedOnInputChange(t)},mouseenter:function(t){e.inputHovering=!0},mouseleave:function(t){e.inputHovering=!1}},model:{value:e.selectedLabel,callback:function(t){e.selectedLabel=t},expression:"selectedLabel"}},[e.$slots.prefix?n("template",{slot:"prefix"},[e._t("prefix")],2):e._e(),e._v(" "),n("template",{slot:"suffix"},[n("i",{directives:[{name:"show",rawName:"v-show",value:!e.showClose,expression:"!showClose"}],class:["el-select__caret","el-input__icon","el-icon-"+e.iconClass]}),e._v(" "),e.showClose?n("i",{staticClass:"el-select__caret el-input__icon el-icon-circle-close",on:{click:e.handleClearClick}}):e._e()])],2),e._v(" "),n("transition",{attrs:{name:"el-zoom-in-top"},on:{"before-enter":e.handleMenuEnter,"after-leave":e.doDestroy}},[n("el-select-menu",{directives:[{name:"show",rawName:"v-show",value:e.visible&&!1!==e.emptyText,expression:"visible && emptyText !== false"}],ref:"popper",attrs:{"append-to-body":e.popperAppendToBody}},[n("el-scrollbar",{directives:[{name:"show",rawName:"v-show",value:e.options.length>0&&!e.loading,expression:"options.length > 0 && !loading"}],ref:"scrollbar",class:{"is-empty":!e.allowCreate&&e.query&&0===e.filteredOptionsCount},attrs:{tag:"ul","wrap-class":"el-select-dropdown__wrap","view-class":"el-select-dropdown__list"}},[e.showNewOption?n("el-option",{attrs:{value:e.query,created:""}}):e._e(),e._v(" "),e._t("default",e._l(e.selectOptions,(function(option,e){return n("el-option",{key:option.value||e,attrs:{value:option.value,label:option.label}})})))],2),e._v(" "),e.emptyText&&(!e.allowCreate||e.loading||e.allowCreate&&0===e.options.length)?[e.$slots.empty?e._t("empty"):n("p",{staticClass:"el-select-dropdown__empty"},[e._v("\n          "+e._s(e.emptyText)+"\n        ")])]:e._e()],2)],1)],1)}),[],!1,null,"f0b65a88",null);t.default=component.exports},819:function(e,t,n){"use strict";n.r(t);var l=n(801),o=n(799),r={components:{SelectEntity:l.default},props:{value:{type:Object,default:function(){return{provinceCode:null,districtCode:null,wardCode:null,street:"",text:"",isPrimary:!1}}},fields:{type:Array,default:function(){return["provice","district","ward","street","name","phone","primary"]}},props:{type:Object,default:function(){return{}}}},data:function(){return{editValue:{provinceCode:null,districtCode:null,wardCode:null,street:"",text:"",isPrimary:!1},selectProvinceConfig:{service:this.$services.Location,valueKey:"code",payload:{search:"",pageSize:100},selectProps:{clearable:!0,placeholder:"Chọn tỉnh, thành phố"}},selectDistrictConfig:{service:this.$services.Location,valueKey:"code",payload:{search:"",pageSize:100,query:{provinceCode:void 0}},selectProps:{clearable:!0,placeholder:"Chọn quận, huyện",disabled:!1}},selectWardConfig:{service:this.$services.Location,valueKey:"code",payload:{search:"",pageSize:100,query:{districtCode:void 0}},selectProps:{clearable:!0,placeholder:"Chọn phường, xã",disabled:!1}}}},computed:{_selectProvinceConfig:function(){return o.a.merge(this.selectProvinceConfig,{payload:{query:{type:"province"}},selectProps:{placeholder:"Chọn tỉnh, thành phố"}})},_selectDistrictConfig:function(){return o.a.merge(this.selectDistrictConfig,{payload:{query:{type:"district",provinceCode:this.editValue.provinceCode}},selectProps:{disabled:!this.editValue.provinceCode}})},_selectWardConfig:function(){return o.a.merge(this.selectWardConfig,{payload:{query:{type:"ward",districtCode:this.editValue.districtCode}},selectProps:{disabled:!this.editValue.provinceCode||!this.editValue.districtCode}})}},created:function(){this.value?this.editValue=this.value:this.$emit("input",this.editValue)},methods:{handleChangeProvince:function(){var e=this;console.log("handleChangeProvince"),this.editValue.districtCode=null,this.editValue.wardCode=null,this.$emit("input",this.editValue),this.$nextTick((function(){var t;null===(t=e.$refs.selectDistrict)||void 0===t||t.fetchData()}))},handleChangeDistrict:function(){var e=this;this.editValue.wardCode=null,this.$emit("input",this.editValue),this.$nextTick((function(){var t;null===(t=e.$refs.selectWard)||void 0===t||t.fetchData()}))},handleChangeWard:function(){this.$emit("input",this.editValue)}}},c=n(4),component=Object(c.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-row",{attrs:{gutter:12}},[n("el-col",{attrs:{md:12}},[e.fields.includes("provice")?n("el-form-item",{attrs:{label:"Tỉnh/Thành phố"}},[n("SelectEntity",e._b({staticClass:"w-full",on:{change:e.handleChangeProvince},model:{value:e.editValue.provinceCode,callback:function(t){e.$set(e.editValue,"provinceCode",t)},expression:"editValue.provinceCode"}},"SelectEntity",e._selectProvinceConfig,!1))],1):e._e()],1),e._v(" "),n("el-col",{attrs:{md:12}},[e.fields.includes("district")?n("el-form-item",{attrs:{label:"Quyện/Huyện"}},[n("SelectEntity",e._b({ref:"selectDistrict",staticClass:"w-full",attrs:{"select-props":e._selectDistrictConfig.selectProps},on:{change:e.handleChangeDistrict},model:{value:e.editValue.districtCode,callback:function(t){e.$set(e.editValue,"districtCode",t)},expression:"editValue.districtCode"}},"SelectEntity",e._selectDistrictConfig,!1))],1):e._e()],1),e._v(" "),n("el-col",{attrs:{md:12}},[e.fields.includes("ward")?n("el-form-item",{attrs:{label:"Xã/Phường"}},[n("SelectEntity",e._b({ref:"selectWard",staticClass:"w-full",on:{change:e.handleChangeWard},model:{value:e.editValue.wardCode,callback:function(t){e.$set(e.editValue,"wardCode",t)},expression:"editValue.wardCode"}},"SelectEntity",e._selectWardConfig,!1))],1):e._e()],1),e._v(" "),n("el-col",[e.fields.includes("street")?n("el-form-item",{attrs:{label:"Địa chỉ"}},[n("el-input",{attrs:{type:"textarea"},model:{value:e.editValue.street,callback:function(t){e.$set(e.editValue,"street",t)},expression:"editValue.street"}})],1):e._e()],1),e._v(" "),n("el-col",{attrs:{md:12}},[e.fields.includes("name")?n("el-form-item",{attrs:{label:"Tên",prop:e.props.name}},[n("el-input",{model:{value:e.editValue.name,callback:function(t){e.$set(e.editValue,"name",t)},expression:"editValue.name"}})],1):e._e()],1),e._v(" "),n("el-col",{attrs:{md:12}},[e.fields.includes("phone")?n("el-form-item",{attrs:{label:"Số điện thoại",prop:e.props.phone}},[n("el-input",{model:{value:e.editValue.phone,callback:function(t){e.$set(e.editValue,"phone",t)},expression:"editValue.phone"}})],1):e._e()],1),e._v(" "),n("el-col",[e.fields.includes("primary")?n("el-checkbox",{attrs:{label:"Đặt làm mặc định"},model:{value:e.editValue.isPrimary,callback:function(t){e.$set(e.editValue,"isPrimary",t)},expression:"editValue.isPrimary"}}):e._e()],1)],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{SelectEntity:n(801).default})},820:function(e,t,n){"use strict";n.r(t);n(20),n(12),n(25),n(38),n(39);var l=n(7),o=(n(473),n(81),n(297),n(298),n(116),n(17),n(40),n(41),n(827),n(113),n(13),n(834)),r=n(800);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function d(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){Object(l.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var f={name:"TinymceEditor",components:{editor:o.a,MediaPicker:r.default},props:{value:String,toolbarSize:{validator:function(e){return"small"===e||"normal"===e},default:"normal"},placeholder:String,options:{type:Object,default:function(){return{}}},disabled:{type:Boolean,default:!1}},data:function(){var e=this;return{selectedImage:[],init:d({max_height:600,menubar:!1,toolbar_mode:"sliding",plugins:["advlist autolink lists link image charmap print preview anchor media advcode","searchreplace visualblocks code fullscreen","insertdatetime media table paste code wordcount a11ychecker tabfocus"],toolbar:["fullscreen preview formatselect fontselect bold italic forecolor backcolor","alignleft aligncenter alignright alignjustify","table bullist numlist outdent indent removeformat image mediapicker media undo redo code"].join(" ").split(" ").join("|"),font_formats:"Andale Mono=andale mono,times; Arial=arial,helvetica,sans-serif; Arial Black=arial black,avant garde; Book Antiqua=book antiqua,palatino; Comic Sans MS=comic sans ms,sans-serif; Courier New=courier new,courier; Georgia=georgia,palatino; Helvetica=helvetica; Impact=impact,chicago; Symbol=symbol; Tahoma=tahoma,arial,helvetica,sans-serif; Terminal=terminal,monaco; Times New Roman=times new roman,times; Trebuchet MS=trebuchet ms,geneva; Verdana=verdana,geneva; Webdings=webdings; Wingdings=wingdings,zapf dingbats",paste_preprocess:function(e,data){if(console.log(e,data.content),data.content){if(data.content.startsWith("https://youtu.be")){var t=data.content.replace("https://youtu.be","https://www.youtube.com/embed");return void(data.content='<iframe width="560" height="315" src="'.concat(t,'" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>'))}if(data.content.startsWith("https://www.youtube.com/watch")){var n=new URL(data.content).searchParams.get("v"),l="https://www.youtube.com/embed/".concat(n);return void(data.content='<iframe width="560" height="315" src="'.concat(l,'" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>'))}(data.content.startsWith("https:")||data.content.startsWith("http:"))&&(data.content='<a href="'.concat(data.content,'">').concat(data.content,"</a>"))}},lists_indent_on_tab:!0,content_css:"/css/tinymce.css",images_upload_handler:this.imageUploadHandler,image_caption:!0,image_advtab:!0,a11y_advanced_options:!0,resize_img_proportional:!1,paste_data_images:!0,image_dimensions:!1,automatic_uploads:!0,file_picker_callback:this.filePickerHandler,image_class_list:[{title:"Width: 100%",value:"image__w-full"},{title:"Width: 50%",value:"image__w-50pt"},{title:"Width: auto",value:"image__w-auto"}],setup:function(t){e.$emit("setup",t),e.editor=t,t.on("ObjectResized",e.handleImageResized),t.on("keydown",e.handleEditorKeydown),t.ui.registry.addButton("mediapicker",{text:"",icon:"image",onAction:function(){e.$refs.mediaPicker.showDialog()}})},init_instance_callback:function(t){e.$emit("init-instance",t),t.dom.doc.addEventListener("dblclick",e.handleEditorContainerDblclick)},placeholder:this.placeholder,branding:!1,elementpath:!1,statusbar:!0,resize:!0},this.options),editor:null,previewKeyDown:null,active:!0}},computed:{_value:{get:function(){return this.value},set:function(e){return this.$emit("input",e)}}},methods:{imageUploadHandler:function(e,t,n,progress){this.$services.Media.upload(this.$axios,e.blob(),progress,(function(e){return n(e.message)})).then((function(e){t(e[0].url)}))},handleImageResized:function(e){e.target.classList.value=e.target.classList.value.replace(/(^| )image__w-\w*/g,""),e.target.classList.add("resized")},handleEditorContainerDblclick:function(e){"IMG"===e.target.tagName&&window.open(e.target.getAttribute("src"),"_blank")},handleEditorKeydown:function(e){var t=this;"Tab"===e.code&&"Minus"===this.previewKeyDown?(e.preventDefault(),this.$nextTick((function(){t.editor.execCommand("Delete"),t.editor.execCommand("InsertOrderedList",!1,{"list-style-type":"decimal"})}))):"Tab"===e.code&&"Period"===this.previewKeyDown&&(e.preventDefault(),this.$nextTick((function(){t.editor.execCommand("Delete"),t.editor.execCommand("InsertUnorderedList",!0,{"list-style-type":"disc"})}))),this.previewKeyDown=e.code},reload:function(){var e=this;this.active=!1,this.$nextTick((function(){e.active=!0}))},handleInsertImage:function(e){var t=this;(Array.isArray(e)?e:[e]).forEach((function(e){return t.editor.insertContent('<img src="'.concat(e.url,'" alt="').concat(e.alt,'" title="').concat(e.title,'" />'))})),this.$nextTick((function(){t.selectedImage=[],t.$refs.mediaPicker.closeDialog()}))}}},h=(n(815),n(4)),component=Object(h.a)(f,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-editor",style:{"--toolbar-size":{small:"24px",normal:"34px"}[e.toolbarSize]}},[e.active?n("editor",{attrs:{"init-value":e.value,init:e.init,disabled:e.disabled},model:{value:e._value,callback:function(t){e._value=t},expression:"_value"}}):e._e(),e._v(" "),n("MediaPicker",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"mediaPicker",attrs:{limit:100},on:{input:e.handleInsertImage},model:{value:e.selectedImage,callback:function(t){e.selectedImage=t},expression:"selectedImage"}})],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{MediaPicker:n(800).default})},821:function(e,t,n){"use strict";n.r(t);n(64),n(17),n(296);var l=n(800),o={components:{Teleport:n(803).default,MediaPicker:l.default},inject:{elForm:{default:null},elFormItem:{default:null}},props:{value:{type:Object}},data:function(){return{cId:"seo-"+Math.random().toString(36).slice(2)}},watch:{value:function(){this.$emit("input",this.value)}},created:function(){this.value||this.$emit("input",{title:"",description:"",image:null,keywords:[]})}},r=n(4),component=Object(r.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.value?n("div",{staticClass:"seo w-full inline-block",attrs:{id:e.cId}},[e.elFormItem?n("div",{attrs:{id:"content"}}):n("el-collapse",[n("el-collapse-item",{attrs:{title:"SEO Setting"}},[e.elForm?n("div",{attrs:{id:"content"}}):n("el-form",{attrs:{id:"content"}})],1)],1),e._v(" "),n("Teleport",{attrs:{to:".seo#"+e.cId+" #content"}},[n("el-form-item",{attrs:{label:"Title"}},[n("el-input",{model:{value:e.value.title,callback:function(t){e.$set(e.value,"title",t)},expression:"value.title"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"Description"}},[n("el-input",{attrs:{type:"textarea",autosize:{minRows:2}},model:{value:e.value.description,callback:function(t){e.$set(e.value,"description",t)},expression:"value.description"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"Từ khóa",prop:"keywords"}},[n("el-select",{staticClass:"w-full",attrs:{"allow-create":"","default-first-option":"",filterable:"",multiple:""},model:{value:e.value.keywords,callback:function(t){e.$set(e.value,"keywords",t)},expression:"value.keywords"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"Image"}},[n("MediaPicker",{model:{value:e.value.image,callback:function(t){e.$set(e.value,"image",t)},expression:"value.image"}})],1)],1)],1):e._e()}),[],!1,null,"12fa5bff",null);t.default=component.exports;installComponents(component,{MediaPicker:n(800).default,Teleport:n(803).default})},822:function(e,t,n){"use strict";n.r(t);var l={extends:n(34).Input,props:{value:{}},computed:{nativeInputValue:function(){if(!this.value)return"";try{return JSON.stringify(this.value,null,2)}catch(e){}return""}},methods:{handleInput:function(e){},handleBlur:function(e){var t;this.focused=!1,this.$emit("blur",e);try{t=JSON.parse(e.target.value),this.$emit("input",t),this.setNativeInputValue()}catch(e){console.log(e)}this.validateEvent&&this.dispatch("ElFormItem","el.form.blur",[this.value])}}},o=n(4),component=Object(o.a)(l,undefined,undefined,!1,null,"9c916746",null);t.default=component.exports},823:function(e,t,n){e.exports=function(){"use strict";var e={16:function(e,t,n){function l(e,t,n,l,o,s,a,i){var r,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=n,c._compiled=!0),l&&(c.functional=!0),s&&(c._scopeId="data-v-"+s),a?(r=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},c._ssrRegister=r):o&&(r=i?function(){o.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:o),r)if(c.functional){c._injectStyles=r;var d=c.render;c.render=function(e,t){return r.call(t),d(e,t)}}else{var f=c.beforeCreate;c.beforeCreate=f?[].concat(f,r):[r]}return{exports:e,options:c}}n.r(t),n.d(t,{default:function(){return d}});var o=l({props:{data:{required:!0,type:String},collapsedOnClickBrackets:Boolean},methods:{toggleBrackets(e){this.collapsedOnClickBrackets&&this.$emit("click",e)}}},(function(){var e=this,t=e.$createElement;return(e._self._c||t)("span",{staticClass:"vjs-tree__brackets",on:{click:function(t){return t.stopPropagation(),e.toggleBrackets(t)}}},[e._v("\n  "+e._s(e.data)+"\n")])}),[],!1,null,null,null).exports,s=l({props:{checked:{type:Boolean,default:!1},isMultiple:Boolean},data:()=>({focus:!1}),computed:{uiType(){return this.isMultiple?"checkbox":"radio"},model:{get(){return this.checked},set(e){this.$emit("input",e)}}}},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{class:["vjs-check-controller",e.checked?"is-checked":""],on:{click:function(e){e.stopPropagation()}}},[n("span",{class:"vjs-check-controller__inner is-"+e.uiType}),e._v(" "),"checkbox"===e.uiType?n("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],class:"vjs-check-controller__original is-"+e.uiType,attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.model)?e._i(e.model,null)>-1:e.model},on:{change:[function(t){var n=e.model,l=t.target,o=!!l.checked;if(Array.isArray(n)){var s=e._i(n,null);l.checked?s<0&&(e.model=n.concat([null])):s>-1&&(e.model=n.slice(0,s).concat(n.slice(s+1)))}else e.model=o},function(t){return e.$emit("change",e.model)}],focus:function(t){e.focus=!0},blur:function(t){e.focus=!1}}}):"radio"===e.uiType?n("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],class:"vjs-check-controller__original is-"+e.uiType,attrs:{type:"radio"},domProps:{checked:e._q(e.model,null)},on:{change:[function(t){e.model=null},function(t){return e.$emit("change",e.model)}],focus:function(t){e.focus=!0},blur:function(t){e.focus=!1}}}):n("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],class:"vjs-check-controller__original is-"+e.uiType,attrs:{type:e.uiType},domProps:{value:e.model},on:{change:function(t){return e.$emit("change",e.model)},focus:function(t){e.focus=!0},blur:function(t){e.focus=!1},input:function(t){t.target.composing||(e.model=t.target.value)}}})])}),[],!1,null,null,null);function a(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function i(e,t="root",n=0,{key:l,index:o,type:s="content",showComma:r=!1,length:c=1}={}){const d=a(e);if("array"===d){const o=e.map(((e,l,o)=>i(e,`${t}[${l}]`,n+1,{index:l,showComma:l!==o.length-1,length:c,type:s}))).flat();return[i("[",t,n,{key:l,length:e.length,type:"arrayStart"})[0]].concat(o,i("]",t,n,{showComma:r,length:e.length,type:"arrayEnd"})[0])}if("object"===d){const a=Object.keys(e),d=a.map(((l,o,a)=>i(e[l],l.includes(".")?`${t}["${l}"]`:`${t}.${l}`,n+1,{key:l,showComma:o!==a.length-1,length:c,type:s}))).flat();return[i("{",t,n,{key:l,index:o,length:a.length,type:"objectStart"})[0]].concat(d,i("}",t,n,{showComma:r,length:a.length,type:"objectEnd"})[0])}const f=Object.entries({content:e,level:n,key:l,index:o,path:t,showComma:r,length:c,type:s}).reduce(((e,[t,n])=>void 0!==n?{...e,[t]:n}:e),{});return"object"===a(f)?[f]:f}var r=l({components:{Brackets:o,CheckController:s.exports},props:{node:{required:!0,type:Object},collapsed:Boolean,collapsedOnClickBrackets:Boolean,showDoubleQuotes:Boolean,showLength:Boolean,checked:Boolean,selectableType:{type:String,default:""},showSelectController:{type:Boolean,default:!1},showLine:{type:Boolean,default:!0},selectOnClickNode:{type:Boolean,default:!0},pathSelectable:{type:Function,default:()=>!0},highlightSelectedNode:{type:Boolean,default:!0},customValueFormatter:{type:Function,default:null}},computed:{valueClass(){return"vjs-value vjs-value__"+this.dataType},dataType(){return a(this.node.content)},prettyKey(){return this.showDoubleQuotes?`"${this.node.key}"`:this.node.key},selectable(){return this.pathSelectable(this.node.path,this.node.content)&&(this.isMultiple||this.isSingle)},isMultiple(){return"multiple"===this.selectableType},isSingle(){return"single"===this.selectableType}},methods:{defaultFormatter(e){let t=e+"";return"string"===this.dataType&&(t=`"${t}"`),t},customFormatter(e){return this.customValueFormatter?this.customValueFormatter(e,this.node.key,this.node.path,this.defaultFormatter(e)):this.defaultFormatter(e)},onBracketsClick(){this.$emit("brackets-click",!this.collapsed,this.node.path)},onCheckedChange(){this.$emit("selected-change",this.node)},onTreeNodeClick(){this.$emit("tree-node-click",this.node),this.selectable&&this.selectOnClickNode&&this.$emit("selected-change",this.node)}}},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:{"vjs-tree__node":!0,"has-selector":e.showSelectController,"is-highlight":e.highlightSelectedNode&&e.checked},on:{click:e.onTreeNodeClick}},[e.showSelectController&&e.selectable&&"objectEnd"!==e.node.type&&"arrayEnd"!==e.node.type?[n("check-controller",{attrs:{"is-multiple":e.isMultiple,checked:e.checked},on:{change:e.onCheckedChange}})]:e._e(),e._v(" "),e._l(e.node.level,(function(t,l){return n("div",{key:l,class:{"vjs-tree__indent":!0,"has-line":e.showLine}})})),e._v(" "),e.node.key?n("span",{staticClass:"vjs-key"},[e._v(" "+e._s(e.prettyKey)+":  ")]):e._e(),e._v(" "),n("span",["content"!==e.node.type?n("brackets",{attrs:{data:e.node.content,"collapsed-on-click-brackets":e.collapsedOnClickBrackets},on:{click:e.onBracketsClick}}):[e.customValueFormatter?n("span",{class:e.valueClass,domProps:{innerHTML:e._s(e.customFormatter(e.node.content))}}):n("span",{class:e.valueClass},[e._v(e._s(e.defaultFormatter(e.node.content)))])],e._v(" "),e.node.showComma?n("span",[e._v(",")]):e._e(),e._v(" "),e.showLength&&e.collapsed?n("span",{staticClass:"vjs-comment"},[e._v(" // "+e._s(e.node.length)+" items ")]):e._e()],2)],2)}),[],!1,null,null,null),c=l({name:"VueJsonPretty",components:{TreeNode:r.exports},props:{data:{type:[String,Number,Boolean,Array,Object],default:null},deep:{type:Number,default:1/0},path:{type:String,default:"root"},virtual:{type:Boolean,default:!1},itemHeight:{type:Number,default:20},showLength:{type:Boolean,default:!1},showDoubleQuotes:{type:Boolean,default:!0},selectableType:{type:String,default:""},showSelectController:{type:Boolean,default:!1},showLine:{type:Boolean,default:!0},selectOnClickNode:{type:Boolean,default:!0},value:{type:[Array,String],default:()=>""},pathSelectable:{type:Function,default:()=>!0},highlightSelectedNode:{type:Boolean,default:!0},collapsedOnClickBrackets:{type:Boolean,default:!0},customValueFormatter:{type:Function,default:null}},data(){return{translateY:0,visibleData:null,hiddenPaths:i(this.data,this.path).reduce(((e,t)=>"objectStart"!==t.type&&"arrayStart"!==t.type||t.level!==this.deep?e:{...e,[t.path]:1}),{})}},computed:{flatData(){let e=null;return i(this.data,this.path).reduce(((t,n,l)=>{const o={...n,id:l},s=this.hiddenPaths[o.path];if(e&&e.path===o.path){const n="objectStart"===e.type,l={...e,...o,content:n?"{...}":"[...]",type:n?"objectCollapsed":"arrayCollapsed"};return e=null,t.concat(l)}return s&&!e?(e=o,t):e?t:t.concat(o)}),[])},selectedPaths:{get(){return this.value&&"single"===this.selectableType?[this.value]:this.value||[]},set(e){this.$emit("input",e)}},propsError(){return!this.selectableType||this.selectOnClickNode||this.showSelectController?"":"When selectableType is not null, selectOnClickNode and showSelectController cannot be false at the same time, because this will cause the selection to fail."}},watch:{propsError:{handler(e){if(e)throw new Error("[VueJsonPretty] "+e)},immediate:!0},flatData:{handler(){this.onTreeScroll()},immediate:!0}},methods:{onTreeScroll(){if(this.virtual){const e=10,t=this.$refs.tree&&this.$refs.tree.scrollTop||0,n=Math.floor(t/this.itemHeight);let l=n<0?0:n+e>this.flatData.length?this.flatData.length-e:n;l<0&&(l=0);const o=l+e;this.translateY=l*this.itemHeight,this.visibleData=this.flatData.filter(((e,t)=>t>=l&&t<o))}else this.visibleData=this.flatData},onSelectedChange({path:e}){const t=this.selectableType;if("multiple"===t){const t=this.selectedPaths.findIndex((t=>t===e)),n=[...this.selectedPaths];-1!==t?this.selectedPaths.splice(t,1):this.selectedPaths.push(e),this.$emit("change",this.selectedPaths,n)}else if("single"===t&&this.selectedPaths!==e){const t=this.selectedPaths,n=e;this.selectedPaths=n,this.$emit("change",n,t)}},onTreeNodeClick({content:e,path:t}){this.$emit("click",t,e)},onBracketsClick(e,t){if(e)this.hiddenPaths={...this.hiddenPaths,[t]:1};else{const e={...this.hiddenPaths};delete e[t],this.hiddenPaths=e}}}},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"tree",class:{"vjs-tree":!0,"is-virtual":e.virtual},on:{scroll:e.onTreeScroll}},[n("div",{style:e.virtual&&{height:e.flatData.length*e.itemHeight+"px"}},[n("div",{style:e.virtual&&{transform:"translateY("+e.translateY+"px)"}},e._l(e.visibleData,(function(t){return n("tree-node",{key:t.id,attrs:{node:t,collapsed:!!e.hiddenPaths[t.path],"custom-value-formatter":e.customValueFormatter,"show-double-quotes":e.showDoubleQuotes,"show-length":e.showLength,"collapsed-on-click-brackets":e.collapsedOnClickBrackets,checked:e.selectedPaths.includes(t.path),"selectable-type":e.selectableType,"show-line":e.showLine,"show-select-controller":e.showSelectController,"select-on-click-node":e.selectOnClickNode,"path-selectable":e.pathSelectable,"highlight-selected-node":e.highlightSelectedNode},on:{"tree-node-click":e.onTreeNodeClick,"brackets-click":e.onBracketsClick,"selected-change":e.onSelectedChange}})})),1)])])}),[],!1,null,null,null).exports,d=Object.assign({},c,{version:"1.8.0"})}},t={};function n(l){if(t[l])return t[l].exports;var o=t[l]={exports:{}};return e[l](o,o.exports,n),o.exports}return n.d=function(e,t){for(var l in t)n.o(t,l)&&!n.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(16)}()},824:function(e,t,n){var content=n(825);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(33).default)("0502d498",content,!0,{sourceMap:!1})},825:function(e,t,n){var l=n(32)(!1);l.push([e.i,'.vjs-tree__brackets{cursor:pointer}.vjs-tree__brackets:hover{color:#1890ff}.vjs-check-controller{position:absolute;left:0}.vjs-check-controller.is-checked .vjs-check-controller__inner{background-color:#1890ff;border-color:#0076e4}.vjs-check-controller.is-checked .vjs-check-controller__inner.is-checkbox:after{-webkit-transform:rotate(45deg) scaleY(1);transform:rotate(45deg) scaleY(1)}.vjs-check-controller.is-checked .vjs-check-controller__inner.is-radio:after{-webkit-transform:translate(-50%,-50%) scale(1);transform:translate(-50%,-50%) scale(1)}.vjs-check-controller .vjs-check-controller__inner{display:inline-block;position:relative;border:1px solid #bfcbd9;border-radius:2px;vertical-align:middle;-webkit-box-sizing:border-box;box-sizing:border-box;width:16px;height:16px;background-color:#fff;z-index:1;cursor:pointer;-webkit-transition:border-color .25s cubic-bezier(.71,-.46,.29,1.46),background-color .25s cubic-bezier(.71,-.46,.29,1.46);-o-transition:border-color .25s cubic-bezier(.71,-.46,.29,1.46),background-color .25s cubic-bezier(.71,-.46,.29,1.46);transition:border-color .25s cubic-bezier(.71,-.46,.29,1.46),background-color .25s cubic-bezier(.71,-.46,.29,1.46)}.vjs-check-controller .vjs-check-controller__inner:after{-webkit-box-sizing:content-box;box-sizing:content-box;content:"";border:2px solid #fff;border-left:0;border-top:0;height:8px;left:4px;position:absolute;top:1px;-webkit-transform:rotate(45deg) scaleY(0);transform:rotate(45deg) scaleY(0);width:4px;-webkit-transition:-webkit-transform .15s cubic-bezier(.71,-.46,.88,.6) .05s;transition:-webkit-transform .15s cubic-bezier(.71,-.46,.88,.6) .05s;-o-transition:transform .15s cubic-bezier(.71,-.46,.88,.6) .05s;transition:transform .15s cubic-bezier(.71,-.46,.88,.6) .05s;transition:transform .15s cubic-bezier(.71,-.46,.88,.6) .05s,-webkit-transform .15s cubic-bezier(.71,-.46,.88,.6) .05s;-webkit-transform-origin:center;transform-origin:center}.vjs-check-controller .vjs-check-controller__inner.is-radio{border-radius:100%}.vjs-check-controller .vjs-check-controller__inner.is-radio:after{border-radius:100%;height:4px;background-color:#fff;left:50%;top:50%}.vjs-check-controller .vjs-check-controller__original{opacity:0;outline:none;position:absolute;z-index:-1;top:0;left:0;right:0;bottom:0;margin:0}.vjs-tree__node{display:-webkit-box;display:-ms-flexbox;display:flex;position:relative}.vjs-tree__node.has-selector{padding-left:30px}.vjs-tree__node.is-highlight,.vjs-tree__node:hover{background-color:#e6f7ff}.vjs-tree__node .vjs-tree__indent{-webkit-box-flex:0;-ms-flex:0 0 1em;flex:0 0 1em}.vjs-tree__node .vjs-tree__indent.has-line{border-left:1px dashed #bfcbd9}.vjs-comment{color:#bfcbd9}.vjs-value__null{color:#ff4949}.vjs-value__boolean,.vjs-value__number{color:#1d8ce0}.vjs-value__string{color:#13ce66}.vjs-tree{font-family:Monaco,Menlo,Consolas,Bitstream Vera Sans Mono,monospace;font-size:14px}.vjs-tree.is-virtual{overflow:auto}.vjs-tree.is-virtual .vjs-tree__node{white-space:nowrap}',""]),e.exports=l},826:function(e,t,n){"use strict";n.r(t);n(12),n(38),n(39);var l=n(7),o=n(8),r=n(24),c=n(295),d=(n(63),n(13),n(25),n(21),n(113),n(115),n(119),n(20),n(473),n(81),n(472),n(116),n(294),n(808)),f=n(810),h=n(811),m=n(299);function v(e,t){var n,l,o,r,c,d,f,h,v,component,y,_={},k={required:e.required||!1},x=function(t,n,l){if(t.required&&!n)return l(new Error(e.prop+" is required"));l()},map={String:function(){k.type="string",component="ElInput",e.enum?(component="FormSelect",_.selectOptions=e.enum.map((function(t){var n,l;return{value:t,label:(null===(n=e.ui)||void 0===n||null===(l=n.enumMap)||void 0===l?void 0:l[t])||t}}))):"textarea"===e.subType&&(_.type="textarea")},Number:function(){component="InputNumber",_.min=e.min,_.max=e.max,k.type="number"},Boolean:function(){component="ElSwitch",k.type="boolean"},Mixed:function(){component="FormMixed",_.type="textarea",_.autosize=!0,k.type="object"},Array:function(){var n;(k.type="array",_.style="width: 100%;","ObjectId"===e.arrayType)?(component="SelectEntity",_.service=Object(m.b)(e.ref,null===(n=t[e.ref])||void 0===n?void 0:n.endpoint),_.limit=_.max||1e3,_.payload=_.payload||{query:{},search:"",page:1,pageSize:1e3,total:0,exact:!0}):(component="FormSelect",e.enum?(_.selectOptions=e.enum.map((function(t){var n,l;return{value:t,label:(null===(n=e.ui)||void 0===n||null===(l=n.enumMap)||void 0===l?void 0:l[t])||t}})),_.allowCreate=!1):(_["default-first-option"]=!0,_.allowCreate=!0,_.filterable=!0,_.multiple=!0))},ObjectId:function(){var n;component="SelectEntity",_.service=Object(m.b)(e.ref,null===(n=t[e.ref])||void 0===n?void 0:n.endpoint),_.limit=1,_.style="width: 100%;",k.validator=x},Date:function(){component="ElDatePicker",_.format="dd-MM-yyyy",k.validator=x,"datetime"===e.subType&&(_.type="datetime",_.format="dd-MM-yyyy HH:mm")}};(map[e.type]&&map[e.type](),null!==(n=e.ui)&&void 0!==n&&n.type)&&(component=null===(y=e.ui)||void 0===y?void 0:y.type);Object.assign(_,(null===(l=e.ui)||void 0===l||null===(o=l.form)||void 0===o?void 0:o.input)||{});var w={label:e.name,component:component,props:_,rules:k};return null!==(r=e.ui)&&void 0!==r&&null!==(c=r.form)&&void 0!==c&&c.col&&(w.col=null===(d=e.ui)||void 0===d||null===(f=d.form)||void 0===f?void 0:f.col),w.label=(null===(h=e.ui)||void 0===h||null===(v=h.form)||void 0===v?void 0:v.label)||e.name,w}var y=n(76),_=n(799),k=n(22);function x(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function w(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?x(Object(source),!0).forEach((function(t){Object(l.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):x(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var C={components:{TableFilter:d.default,FilterDate:f.default,DetailEntity:h.default},props:{columns:{type:Array,default:function(){return[]}},data:{type:Array,default:function(){return[]}},service:{type:y.b},method:{type:String,default:"list"},options:{type:Object,default:function(){return{search:!0,filter:!1,pagination:!0}}},dialogs:{type:Object,default:function(){return{view:{title:"Chi tiết"},edit:{title:"Chỉnh sửa"}}}},filterDates:{type:Array,default:function(){return[]}},tableProps:{type:Object,default:function(){return{}}},tableEvents:{type:Object},payload:{type:Object,default:function(){return{query:{},search:"",page:1,pageSize:10,total:0,exact:!0}}},entitySchema:Object,hooks:{type:Object,default:function(){return{}}}},data:function(){return{fetching:!1,selectedRow:null,mode:null,controlSetting:null,isShowView:!1,isShowEdit:!1,isShowCreate:!1,formCreate:null,selectedImage:null,listImages:[]}},created:function(){var e=this;this.columns.forEach((function(t){if(t.filter&&!t.formatter){var n="string"!=typeof t.filter?t.filter.name:t.filter,l="string"!=typeof t.filter&&t.filter.args||[];t.formatter=function(t,o,r,d){var f;return(f=e.$options.filters)[n].apply(f,[r].concat(Object(c.a)(l)))}}})),this.fetchData()},methods:{showImage:function(img,e){var t=this;this.selectedImage=img,this.listImages=e?e.map((function(e){return t.getImageSrc(e)})):[],this.listImages=Array.isArray(this.listImages)?this.listImages:[this.listImages],setTimeout((function(){t.$refs.elImage.clickHandler()}))},renderHeader:function(e,t){var n,l=t.column;t.$index;l.minWidth&&l.width||(l.minWidth=Math.max(80,14*(null===(n=l.label)||void 0===n?void 0:n.length)));return l.label},getUpdateFields:function(){var e,t,n,l,o=this;return null!==(e=this.dialogs.edit)&&void 0!==e&&null!==(t=e.form)&&void 0!==t&&t.fields?null===(n=this.dialogs.edit)||void 0===n||null===(l=n.form)||void 0===l?void 0:l.fields:this.entitySchema?Object.keys(this.entitySchema).map((function(e){var t=o.entitySchema[e],n=v(t,o.$store.state.schemas),l=Object.keys(o.entitySchema).length>10;return Object(k.defaultsDeep)(n,t,{col:l?{md:12}:{},label:e,prop:e})})):[]},getCreateFields:function(){var e,t,n,l,o=this;return null!==(e=this.dialogs.create)&&void 0!==e&&null!==(t=e.form)&&void 0!==t&&t.fields?null===(n=this.dialogs.create)||void 0===n||null===(l=n.form)||void 0===l?void 0:l.fields:this.entitySchema?Object.keys(this.entitySchema).map((function(e){var t=o.entitySchema[e],n=v(t,o.$store.state.schemas),l=Object.keys(o.entitySchema).length>10;return Object(k.defaultsDeep)(n,t,{col:l?{md:12}:{},label:e,prop:e})})):[]},getComponentProps:function(e,t){return t.component.props?"function"==typeof t.component.props?t.component.props(e,this):t.component.props:{}},getComponentText:function(e,t){var text;if(t.component.$text){if("function"==typeof t.component.$text)return t.component.$text(e,this);text=t.component.$text}else text="";return"object"===Object(r.a)(text)&&(text=JSON.stringify(text,null,2)),text},getCellText:function(e,t){var n,l,o,r=null===(n=this.entitySchema)||void 0===n?void 0:n[t.prop];return null!=r&&null!==(l=r.props)&&void 0!==l&&l.labelKey?Object(k.get)(e,[t.prop,null==r||null===(o=r.props)||void 0===o?void 0:o.labelKey].join(".")):Object(k.get)(e,t.prop)},handleDialogAction:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var l,o,r,c,d,f,h,m,v,form,y,_,k,x,C,O,S,j,D,P,$,E;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,"edit"!==t.mode||!t.controlSetting[e]){n.next=4;break}return t.controlSetting[e]({form:t.$refs.formEdit.form,dynamicForm:t.$refs.formEdit,context:t}),n.abrupt("return");case 4:if("edit"!==t.mode){n.next=23;break}if("cancel"!==e){n.next=7;break}return n.abrupt("return",t.isShowEdit=!1);case 7:if("save"!==e){n.next=22;break}return n.next=10,t.$refs.formEdit.validate();case 10:if(n.sent){n.next=12;break}return n.abrupt("return");case 12:return h=(null===(l=t.dialogs)||void 0===l||null===(o=l.edit)||void 0===o?void 0:o.service)||t.service,m=(null===(r=t.dialogs)||void 0===r||null===(c=r.edit)||void 0===c?void 0:c.method)||"updateOne",v=h[m].bind(h),form=t.$refs.formEdit.form,n.next=18,v(t.$axios,w({data:form},(null===(d=t.dialogs)||void 0===d||null===(f=d.edit)||void 0===f?void 0:f.payload)||{}));case 18:y=n.sent,t.updateItem(y),t.$message.success("Cập nhật thành công"),t.isShowEdit=!1;case 22:return n.abrupt("return");case 23:if("create"!==t.mode){n.next=41;break}if("cancel"!==e){n.next=26;break}return n.abrupt("return",t.isShowCreate=!1);case 26:if("save"!==e){n.next=41;break}return n.next=29,t.$refs.formCreate.validate();case 29:if(n.sent){n.next=31;break}return n.abrupt("return");case 31:return j=(null===(_=t.dialogs)||void 0===_||null===(k=_.create)||void 0===k?void 0:k.service)||t.service,D=(null===(x=t.dialogs)||void 0===x||null===(C=x.create)||void 0===C?void 0:C.method)||"create",P=j[D].bind(j),$=t.$refs.formCreate.form,n.next=37,P(t.$axios,w({data:$},(null===(O=t.dialogs)||void 0===O||null===(S=O.create)||void 0===S?void 0:S.payload)||{}));case 37:E=n.sent,t.addItem(E),t.$message.success("Tạo thành công!"),t.isShowCreate=!1;case 41:n.next=47;break;case 43:n.prev=43,n.t0=n.catch(0),console.log("handleDialogAction Error",n.t0),t.$message.error(t.getErrorMessage(n.t0));case 47:case"end":return n.stop()}}),n,null,[[0,43]])})))()},handelShowCreate:function(){var e=this;this.dialogs.create.onShow?this.dialogs.create.onShow():(this.form=null,this.$nextTick((function(){var form={};e.getCreateFields().forEach((function(e){form[e.prop]=e.default})),e.mode="create",e.controlSetting=e.dialogs.create,e.formCreate=form,e.isShowCreate=!0})))},getControlKey:function(e){return"string"==typeof e?e:(null==e?void 0:e.key)||(null==e?void 0:e.text)},handleControlClick:function(e,t,n){var l,r,c,d=this,f=t.row,h=(null===(l=n.events)||void 0===l?void 0:l[this.getControlKey(e)])||{};if(this.controlSetting=h,null!=h&&h.click)null==h||h.click({control:e,props:t,column:n,row:f,context:this});else if(null!=e&&null!==(r=e.events)&&void 0!==r&&r.click)null==e||null===(c=e.events)||void 0===c||c.click({control:e,props:t,column:n,row:f,context:this});else switch(e){case"view":this.mode=null,this.selectedRow=null,this.$nextTick((function(){d.mode="view",d.selectedRow=f,d.isShowView=!0}));break;case"edit":this.mode=null,this.$nextTick((function(){d.mode="edit",d.selectedRow=Object(k.cloneDeep)(f),d.isShowEdit=!0}));break;case"delete":this.$confirm(h.message||"Xác nhận xóa dữ liệu này?",{title:"Xóa dữ liệu",type:"warning"}).then(Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!d.service){e.next=4;break}return e.next=4,(h.service||d.service)[h.method||"delete"](d.$axios,{query:{_id:f.id}});case 4:d.removeItem(f),d.$message("Xóa thành công!"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("delete row error",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))))}},handleSearch:function(text){this.payload.search=text,this.payload.page=1,this.fetchData()},handleFilterDate:function(e,t){var n=this;Object.keys(e).forEach((function(t){e[t]?_.a.set(n.payload.query,t,e[t]):_.a.customUnset(n.payload.query,t)})),this.payload.page=1,this.fetchData()},handlePageSizeChange:function(e){this.payload.page=Math.ceil(this.payload.pageSize/e*this.payload.page),this.payload.pageSize=e,this.fetchData()},handlePageChange:function(e){this.payload.page=e,this.fetchData()},addItem:function(e){var t;if(null!==(t=this.tableProps)&&void 0!==t&&t.rowKey){var n,l,o=this.tableProps.parentField||"parent",r=(null===(n=this.tableProps)||void 0===n||null===(l=n.treeProps)||void 0===l?void 0:l.children)||"children",c=_.b.findRecusive(this.data,(function(t){return t.id===e[o]}),r);((null==c?void 0:c[r])||this.data).unshift(e)}else this.data.unshift(e)},updateItem:function(e){var t;if(null!==(t=this.tableProps)&&void 0!==t&&t.rowKey){var n,l,o=this.tableProps.parentField||"parent",r=(null===(n=this.tableProps)||void 0===n||null===(l=n.treeProps)||void 0===l?void 0:l.children)||"children",c=_.b.findRecusive(this.data,(function(t){return t.id===e.id}));if(c[o]!==e[o]){var d=_.b.findParent(this.data,(function(e){return e.id===c.id}),r);_.b.removeItems(d,c,"id"),this.addItem(e)}else Object.assign(c,e)}else _.b.replace(this.data,e,"id")},removeItem:function(e,t){var n;if(null!==(n=this.tableProps)&&void 0!==n&&n.rowKey){var l,o,r=_.b.findRecusive(this.data,(function(e){return e.id===e[t]})),c=(null==r?void 0:r[(null===(l=this.tableProps)||void 0===l||null===(o=l.treeProps)||void 0===o?void 0:o.children)||"children"])||this.data;_.b.removeItems(c,e,"id")}else _.b.removeItems(this.data,e,"id")},fetchData:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n,l,o,r,d,f,h,data,m,v,y,k,x,C;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.service){t.next=2;break}return t.abrupt("return");case 2:if(e.fetching=!0,t.prev=3,r=w({page:1,pageSize:10,exact:!0},r=_.a.pick(e.payload,["query","page","pageSize","search","exact","populates","sort","select"])),null===(n=e.hooks)||void 0===n||!n.beforeFetch){t.next=12;break}return t.next=9,e.hooks.beforeFetch(r,e);case 9:if(t.sent){t.next=12;break}return t.abrupt("return");case 12:return t.next=14,e.service[e.method](e.$axios,r);case 14:if(d=t.sent,f=_.b.santizeResponse(d),h=f.data,data=void 0===h?[]:h,m=f.page,v=void 0===m?1:m,y=f.pageSize,k=void 0===y?10:y,x=f.total,C=void 0===x?0:x,(l=e.data).splice.apply(l,[0,e.data.length].concat(Object(c.a)(data))),e.payload.page=v,e.payload.pageSize=k,e.payload.total=C,null===(o=e.hooks)||void 0===o||!o.afterFetch){t.next=23;break}return t.next=23,e.hooks.afterFetch(d,e);case 23:t.next=28;break;case 25:t.prev=25,t.t0=t.catch(3),console.log("DataTable fetch data error",t.t0);case 28:e.fetching=!1;case 29:case"end":return t.stop()}}),t,null,[[3,25]])})))()},handleFilter:function(e){var t=this;Object.keys(e).forEach((function(path){var n=e[path];n.isEmpty?_.a.customUnset(t.payload.query,path):_.a.set(t.payload.query,path,n.value)})),this.payload.page=1,this.fetchData()}}},O=(n(831),n(4)),S=Object(O.a)(C,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"data-table w-full"},[n("div",{staticClass:"flex flex-row table-controls mb-2"},[n("div",{staticClass:"left flex"},[e.options.search?n("InputSearch",{staticClass:"max-w-md",attrs:{size:"small"},on:{search:e.handleSearch}}):e._e(),e._v(" "),e._l(e.filterDates,(function(t,l){return n("FilterDate",e._b({key:l,on:{filterDate:function(n){return e.handleFilterDate(n,t)}}},"FilterDate",t,!1))})),e._v(" "),e.options.filter?n("TableFilter",e._b({on:{filter:e.handleFilter}},"TableFilter",e.options.filter,!1)):e._e()],2),e._v(" "),n("div",{staticClass:"flex-1"},[e._t("controls")],2),e._v(" "),n("div",{staticClass:"right flex"},[e.dialogs.create?n("el-button",{attrs:{template:"create"},on:{click:e.handelShowCreate}}):e._e()],1)]),e._v(" "),n("el-table",e._g(e._b({directives:[{name:"loading",rawName:"v-loading",value:e.fetching,expression:"fetching"}],staticStyle:{width:"100%"},attrs:{data:e.data}},"el-table",e.tableProps,!1),e.tableEvents),[e._l(e.columns,(function(t,l){return[t.type?e._e():n("el-table-column",e._b({key:t.key||t.prop||l,attrs:{"render-header":e.renderHeader},scopedSlots:e._u([{key:"default",fn:function(l){var o=l.row;return[t.isImage?n("div",{staticStyle:{width:"48px",height:"48px"}},[e.getImageSrc(e._.get(o,t.prop))?n("img",{staticClass:"column-image",attrs:{src:e.getImageSrc(e._.get(o,t.prop))},on:{click:function(n){e.showImage(e._.get(o,t.prop),[e._.get(o,t.prop)])}}}):e._e()]):t.isImages?n("div",{staticClass:"column-images"},e._l(e._.get(o,t.prop),(function(img,l){return n("img",{key:l,attrs:{src:e.getImageSrc(img)},on:{click:function(n){e.showImage(img,e._.get(o,t.prop))}}})})),0):n("span",{domProps:{innerHTML:e._s(e.getCellText(o,t))}})]}}],null,!0)},"el-table-column",t,!1)),e._v(" "),["selection","index","expand"].includes(t.type)?n("el-table-column",e._b({key:t.key||l},"el-table-column",t,!1)):e._e(),e._v(" "),"component"===t.type?n("el-table-column",e._b({key:t.key||l,scopedSlots:e._u([{key:"default",fn:function(l){return[n("string"==typeof t.component?t.component:e._.get(t,"component.name"),e._g(e._b({tag:"component"},"component",e.getComponentProps(l,t),!1),e._.get(t,"component.events")),[e._v("\n            "+e._s(e.getComponentText(l,t))+"\n          ")])]}}],null,!0)},"el-table-column",t,!1)):e._e(),e._v(" "),"controls"===t.type?n("el-table-column",e._b({key:t.key||l,attrs:{label:t.label||"Thao tác",align:"right",width:t.width||48*e._.get(t,"controls.length",0)},scopedSlots:e._u([{key:"default",fn:function(l){return e._l(t.controls,(function(o){return n("el-button",e._b({key:e.getControlKey(o),attrs:{template:"table_"+e.getControlKey(o)},on:{click:function(n){return e.handleControlClick(o,l,t)}}},"el-button",o.props||{},!1))}))}}],null,!0)},"el-table-column",t,!1)):e._e(),e._v(" "),"slot"===t.type?e._t("column-"+t.prop,null,null,{column:t,ctx:this}):e._e()]}))],2),e._v(" "),e.options.pagination?n("el-pagination",{staticClass:"mt-2",attrs:{"current-page":e.payload.page,"page-sizes":[10,20,50,100,200],"page-size":e.payload.pageSize,total:e.payload.total,layout:"total, sizes, ->, jumper,  prev, pager, next",background:""},on:{"size-change":e.handlePageSizeChange,"current-change":e.handlePageChange}}):e._e(),e._v(" "),e.dialogs.view?n("el-dialog",e._b({ref:"dialogView",attrs:{width:"","custom-class":"table-dialog-view",title:e.dialogs.view.title||""+e._.get(e.selectedRow,"name",""),visible:e.isShowView},on:{"update:visible":function(t){e.isShowView=t}}},"el-dialog",e.dialogs.view.props,!1),[e._t("form-view",[e.selectedRow?n("DetailEntity",e._b({attrs:{schema:e.entitySchema,entity:e.selectedRow}},"DetailEntity",e.dialogs.view,!1)):e._e()],{control:e.controlSetting,context:this,row:e.selectedRow})],2):e._e(),e._v(" "),e.dialogs.edit?n("el-dialog",e._b({ref:"dialogEdit",attrs:{title:e._.get(e.dialogs,"edit.props.title","Chỉnh sửa "+e._.get(e.selectedRow,"name","")),visible:e.isShowEdit},on:{"update:visible":function(t){e.isShowEdit=t},close:function(t){e.selectedRow=null}}},"el-dialog",e.dialogs.edit.props,!1),[e._t("form-edit",[e.selectedRow&&"edit"===e.mode?n("DynamicForm",e._b({ref:"formEdit",attrs:{data:e.selectedRow,fields:e.getUpdateFields()}},"DynamicForm",e.dialogs.edit.form,!1)):e._e()],{control:e.controlSetting,context:this,row:e.selectedRow}),e._v(" "),n("span",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{template:"cancel"},on:{click:function(t){return e.handleDialogAction("cancel",e.mode)}}}),e._v(" "),n("el-button",{attrs:{template:"save"},on:{click:function(t){return e.handleDialogAction("save",e.mode)}}})],1)],2):e._e(),e._v(" "),e.dialogs.create?n("el-dialog",e._b({ref:"dialogCreate",attrs:{title:e._.get(e.dialogs,"create.props.title","Thêm mới"),visible:e.isShowCreate},on:{"update:visible":function(t){e.isShowCreate=t},close:function(t){e.formCreate=null}}},"el-dialog",e.dialogs.create.props,!1),[e._t("form-create",[e.dialogs.create&&e.formCreate?n("DynamicForm",e._b({ref:"formCreate",attrs:{data:e.formCreate,fields:e.getCreateFields()}},"DynamicForm",e.dialogs.create.form,!1)):e._e()],{control:e.controlSetting,context:this,row:e.formCreate}),e._v(" "),n("span",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{template:"cancel"},on:{click:function(t){return e.handleDialogAction("cancel")}}}),e._v(" "),n("el-button",{attrs:{template:"save"},on:{click:function(t){return e.handleDialogAction("save")}}})],1)],2):e._e(),e._v(" "),n("el-image",{ref:"elImage",staticStyle:{width:"0px",height:"0px"},attrs:{src:e.getImageSrc(e.selectedImage),"preview-src-list":e.listImages}})],1)}),[],!1,null,null,null);t.default=S.exports;installComponents(S,{InputSearch:n(807).default,FilterDate:n(810).default,TableFilter:n(808).default,DetailEntity:n(811).default,DynamicForm:n(829).default})},829:function(e,t,n){"use strict";n.r(t);n(20),n(12),n(25),n(38),n(39);var l=n(7),o=(n(115),n(13),n(17),n(835),n(471),n(841)),r=n(836),c=n(818),d=n(822),f=n(830),h=n(801),m=n(819),v=n(820),y=n(800),_=n(821),k=(n(837),n(799));function x(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function w(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?x(Object(source),!0).forEach((function(t){Object(l.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):x(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var C={components:{PrismEditor:r.a,VueJsonEditor:o.a,FormSelect:c.default,InputNumber:f.default,SelectEntity:h.default,AddressEdit:m.default,FormMixed:d.default,TinymceEditor:v.default,MediaPicker:y.default,Seo:_.default},props:{data:{type:Object,default:function(){}},fields:{type:Array,default:function(){return[]}}},data:function(){return{form:{}}},computed:{computedFields:function(){var e=this;return this.fields.map((function(t){return w(w({},k.b.getSourceValue(t,e.form)),e.fieldTemplate(t))}))}},created:function(){var e=this;this.form=w({},this.data),this.form.id||this.fields.forEach((function(t){"default"in t&&t.default&&(e.form[t.prop]=t.default)}))},methods:{fieldTemplate:function(e){var t,n={Seo:{component:"Seo"},Checkbox:{component:"ElCheckbox"},Select:{component:"FormSelect"},Address:{component:"AddressEdit"},RichText:{component:"TinymceEditor",props:{style:{width:"100%"}}},MediaPicker:{component:"MediaPicker",props:w({limit:"Array"===e.type?100:1},e.props)},SelectEntity:{component:"SelectEntity",props:w(w({limit:"Array"===e.type?100:1},e.props),{},{clearable:!e.required})},JSON:{component:"VueJsonEditor",props:{mode:"code"}}};return n[null===(t=e.ui)||void 0===t?void 0:t.type]||n[e.type]||{}},validate:function(){var e=this;return new Promise((function(t){e.$refs.form.validate((function(e){return t(e)}))}))},validateField:function(e){return this.$refs.form.validateField(e)},clearValidate:function(e){this.$refs.form.clearValidate(e)},resetFields:function(){this.$refs.form.resetFields()},getCol:function(col){return Number.isInteger(col)?{span:col}:col||{}}}},O=n(4),component=Object(O.a)(C,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dynamic-form"},[n("el-form",{ref:"form",attrs:{model:e.form}},[n("el-row",{attrs:{gutter:12}},e._l(e.computedFields,(function(t){return n("el-col",e._b({key:t.prop},"el-col",e.getCol(t.col),!1),["none"===t.wrap?n(t.component,e._b({tag:"component",model:{value:e.form[t.prop],callback:function(n){e.$set(e.form,t.prop,n)},expression:"form[field.prop]"}},"component",t.props,!1,!0)):"collapse"===t.wrap?n("el-collapse",[n("el-collapse-item",{attrs:{title:t.label}},[n(t.component,e._b({tag:"component",model:{value:e.form[t.prop],callback:function(n){e.$set(e.form,t.prop,n)},expression:"form[field.prop]"}},"component",t.props,!1,!0))],1)],1):n("el-form-item",e._b({key:t.prop,attrs:{label:t.label,prop:t.prop,rules:t.rules}},"el-form-item",e.form.formItemProps,!1),[n(t.component,e._b({key:t.prop,tag:"component",model:{value:e.form[t.prop],callback:function(n){e.$set(e.form,t.prop,n)},expression:"form[field.prop]"}},"component",t.props,!1,!0))],1)],1)})),1)],1)],1)}),[],!1,null,"989bc47c",null);t.default=component.exports},831:function(e,t,n){"use strict";n(814)},832:function(e,t,n){var l=n(32)(!1);l.push([e.i,".data-table .table-controls .left>*,.data-table .table-controls .right>*,.data-table .table-controls>*{margin-top:auto;margin-bottom:auto}.data-table .table-controls .left>*+*,.data-table .table-controls .right>*+*,.data-table .table-controls>*+*{margin-left:10px}.data-table .column-image{width:48px;height:48px;-o-object-fit:contain;object-fit:contain;position:absolute;top:50%;transform:translateY(-50%);box-shadow:0 1px 3px 0 rgba(0,0,0,.1),0 1px 2px 0 rgba(0,0,0,.06);border-radius:.25rem;--bg-opacity:1;background-color:#fff;background-color:rgba(255,255,255,var(--bg-opacity))}.data-table .column-image:hover{box-shadow:0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -2px rgba(0,0,0,.05);cursor:pointer}.data-table .column-images{height:48px}.data-table .column-images img{z-index:0;display:none;position:absolute;width:48px;height:48px;-o-object-fit:contain;object-fit:contain;top:50%;transform:translateY(-50%);box-shadow:0 1px 3px 0 rgba(0,0,0,.1),0 1px 2px 0 rgba(0,0,0,.06);border-radius:.25rem;--bg-opacity:1;background-color:#fff;background-color:rgba(255,255,255,var(--bg-opacity))}.data-table .column-images img:hover{box-shadow:0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -2px rgba(0,0,0,.05);cursor:pointer;z-index:1}.data-table .column-images img:first-child{display:block;left:0}.data-table .column-images img:nth-child(2){display:block;left:12px}.data-table .column-images img:nth-child(3){display:block;left:24px}.el-dialog.table-dialog-view{width:100%;margin-top:4vh!important}.el-dialog.table-dialog-view .el-dialog__body{max-height:calc(90vh - 54px);overflow:scroll}@media screen and (min-width:800px){.el-dialog.table-dialog-view{width:75%}}",""]),e.exports=l}}]);