(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{799:function(e,t,r){"use strict";var n=r(22);r.d(t,"a",(function(){return n}));var o=r(114);r.d(t,"b",(function(){return o}))},851:function(e,t,r){var content=r(877);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(33).default)("2b45663b",content,!0,{sourceMap:!1})},876:function(e,t,r){"use strict";r(851)},877:function(e,t,r){var n=r(32)(!1);n.push([e.i,".upload .upload-item+.upload-item[data-v-47b27a57]{margin-left:.25rem}.upload .upload-item[data-v-47b27a57]{margin-bottom:.25rem;position:relative}.upload .upload-item .upload-item-controls[data-v-47b27a57]{width:100%;text-align:center;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.upload .upload-item .upload-item-controls .app-icon[data-v-47b27a57]{display:inline-block;cursor:pointer}",""]),e.exports=n},889:function(e,t,r){"use strict";r.r(t);r(20),r(12),r(38),r(39);var n=r(8),o=r(7),l=(r(63),r(471),r(115),r(25),r(64),r(65),r(40),r(13),r(17),r(41),r(827),r(21),r(474),r(294),r(199),r(799));function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function d(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var f={props:{size:{type:[Number,String],default:48},value:{type:[String,Array]},limit:{type:Number,default:1},entites:{type:Array,default:function(){return[]}}},data:function(){return{items:[],preview:null,isShowPreview:!1}},computed:{_size:function(){return isNaN(this.size)?this.size:this.size+"px"}},created:function(){this.items=(this.limit>1?this.value||[]:[this.value]).filter((function(e){return!!e})).map((function(e){return{id:l.b.createUniqueId(),url:e,name:e,status:"success"}}))},methods:{pickFile:function(){this.$refs.inputFile.click()},handleFileChange:function(e){var t=this,r=Array.from(e.target.files).slice(0,this.limit-this.items.length);e.target.value="",r.forEach((function(e){var r={id:l.b.createUniqueId(),url:URL.createObjectURL(e),name:e.name,status:"uploading",progress:0,response:null};t.items.push(r),t.$services.Upload.upload(t.$axios,e,(function(progress){r.progress=progress})).then((function(e){if(r.response=e,r.url=e.url,r.status="success",t.limit>1){var n=t.value||[],o=t.items.findIndex((function(e){return e===r}));n.splice(o,0,r.url),t.$emit("input",n)}else t.$emit("input",r.url)})).catch((function(e){console.log("upload error",r,e),t.items.status="error"}))}))},handleView:function(e){var t=d(d({},e),{},{entity:e.response||this.entites.find((function(t){return t.url===e.url}))});t.entity&&(t.entity.meta=t.entity.meta||{alt:"",description:""}),this.preview=l.a.cloneDeep(t),this.isShowPreview=!0},handleRemove:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(l.b.removeItems(t.items,e,"id"),!(n=e.response||t.entites.find((function(t){return t.url===e.url})))){r.next=5;break}return r.next=5,t.$services.Media.delete(t.$axios,{query:{_id:n.id}});case 5:case"end":return r.stop()}}),r)})))()},handleUpdate:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$services.Media.update(e.$axios,{query:{_id:e.preview.entity.id},data:e.preview.entity});case 2:e.isShowPreview=!1;case 3:case"end":return t.stop()}}),t)})))()}}},m=(r(876),r(4)),component=Object(m.a)(f,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"upload inline-flex",style:{height:e._size}},[r("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"inputFile",attrs:{type:"file",multiple:e.limit>1},on:{input:e.handleFileChange}}),e._v(" "),e._l(e.items,(function(t){return r("div",{key:t.id,staticClass:"upload-item border flex rounded",style:{height:e._size,width:e._size}},[r("img",{staticClass:"w-full object-cover my-auto",attrs:{src:t.url}}),e._v(" "),r("div",{staticClass:"overlay absolute w-full h-full top-0 left-0 opacity-0 hover:opacity-100 hover:bg-gray-800 hover:bg-opacity-25 overflow-hidden"},[r("div",{staticClass:"upload-item-controls"},[r("icon",{attrs:{name:"el-icon-zoom-in rounded bg-white shadow cursor-pointer"},on:{click:function(r){return e.handleView(t)}}}),e._v(" "),r("icon",{attrs:{name:"el-icon-delete rounded bg-white shadow cursor-pointer"},on:{click:function(r){return e.handleRemove(t)}}})],1)])])})),e._v(" "),e.items.length<e.limit?r("div",{staticClass:"upload-item add-file-button flex justify-center items-center cursor-pointer border border-dashed bg-gray-200 rounded overflow-hidden",style:{width:e._size,height:e._size},on:{click:e.pickFile}},[r("icon",{attrs:{name:"el-icon-plus"}})],1):e._e(),e._v(" "),r("el-dialog",{attrs:{visible:e.isShowPreview,"custom-class":"max-w-4xl",width:"100%"},on:{"update:visible":function(t){e.isShowPreview=t}}},[e.preview?r("div",[r("img",{staticClass:"w-full",attrs:{src:e.preview.url}}),e._v(" "),e.preview.entity?r("div",{staticClass:"mt-2"},[r("el-input",{attrs:{placeholder:"Nhập mô tả"},model:{value:e.preview.entity.meta.alt,callback:function(t){e.$set(e.preview.entity.meta,"alt",t)},expression:"preview.entity.meta.alt"}}),e._v(" "),r("div",{staticClass:"mt-2 w-full text-right",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:e.handleUpdate}},[e._v("Lưu")])],1)],1):e._e()]):e._e()])],2)}),[],!1,null,"47b27a57",null);t.default=component.exports;installComponents(component,{Icon:r(198).default})}}]);