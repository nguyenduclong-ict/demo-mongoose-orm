(window.webpackJsonp=window.webpackJsonp||[]).push([[10,7,11,12,19,20,22],{801:function(e,t,n){"use strict";n.r(t);n(20),n(12),n(25),n(38),n(39);var l=n(7),o=n(8),r=n(295),c=(n(63),n(471),n(13),n(113),n(294),n(199),n(81),n(472),n(804)),d=n(802),f=n(76),h=n(799);function m(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function v(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(Object(source),!0).forEach((function(t){Object(l.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):m(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var y={name:"SelectEntity",components:{SelectEntityOption:c.default,CustomElSelect:d.default},props:{value:{type:[String,Number,Array,Object]},service:{type:f.b},defaultOptions:{type:Array,default:function(){return[]}},method:{type:String,default:"list"},payload:{type:Object,default:function(){return{query:{},search:"",page:1,pageSize:10,total:0,exact:!0}}},selectProps:{type:Object,default:function(){return{}}},valueKey:{type:String,default:"id"},labelKey:{type:String,default:"name"},limit:{type:Number,default:1},crud:{type:Object,default:function(){return{create:!1,edit:!1,delete:!1}}},transform:{type:[Object,String],validator:function(e){console.log(e)}},filterDataMethod:{type:Function},clearable:{type:Boolean,default:!0}},data:function(){return{data:[],fetching:!1,selectedValues:[],selectedOptions:[],oldSelectedValues:[]}},computed:{_value:{get:function(){var e;return null!==(e=this.transform)&&void 0!==e&&e.get?this.transform.get(this.value,this):this.value},set:function(e){var t;if(null!==(t=this.transform)&&void 0!==t&&t.set)return this.$emit("input",this.transform.set(e,this));this.$emit("input",e||null)}},listOptions:function(){var e,t=this,map={},data=[];return(e=this.defaultOptions||[]).concat.apply(e,Object(r.a)(this.selectedOptions).concat(Object(r.a)(this.data))).forEach((function(e){return h.b.pushIfNotExists(data,map,e,t.valueKey)})),this.filterDataMethod&&(data=this.filterDataMethod(data,this)),data},multiple:function(){return this.limit>1},setting:function(){return Object.assign({},this.selectProps)}},watch:{_value:{handler:function(e){var t=this;if(this.selectedValues.splice(0),e){e=Array.isArray(e)?e:[e];var map={};e.forEach((function(e){var n=t.listOptions.find((function(n){return h.a.get(n,t.valueKey)===e}));n&&h.b.pushIfNotExists(t.selectedValues,map,n,"id")}))}}}},created:function(){this.mapDefaultValue(),this.fetchData()},methods:{handleCreate:function(text,option){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n,l,o,r,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log("create",text),n=e.crud.create.service||e.service,l=e.crud.create.method||"create",o=n[l],r=v({data:{}},e.crud.create.payload||{}),h.a.set(r.data,e.crud.create.field||"name",text),t.next=9,o.call(n,e.$axios,r);case 9:c=t.sent,e.data.unshift(c),e.$nextTick((function(){e.$refs.select.selectOptionByValue(c.id)})),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),console.log("create new item error");case 17:case"end":return t.stop()}}),t,null,[[0,14]])})))()},handleChange:function(e){this.$emit("change",e)},filterMethod:function(text){this.payload.search=text,this.fetchData()},mapDefaultValue:function(){this.selectedValues=[],this.defaultChecked&&(this.limit>1?this.selectedValues=this.defaultChecked:this.selectedValues.push(this.defaultChecked)),this.oldSelectedValues=Object(r.a)(this.selectedValues)},fetchData:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n,l,o,c,d,data,f,m,y,_,k,w;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.service){t.next=3;break}return console.warn("select-entity no service"),t.abrupt("return");case 3:return e.fetching=!0,t.prev=4,l=v({page:1,pageSize:10,exact:!0},l=h.a.pick(e.payload,["query","page","pageSize","search","exact","populates","sort","select"])),t.next=9,e.service[e.method](e.$axios,l);case 9:o=t.sent,c=h.b.santizeResponse(o),d=c.data,data=void 0===d?[]:d,f=c.page,m=void 0===f?1:f,y=c.pageSize,_=void 0===y?10:y,k=c.total,w=void 0===k?0:k,(n=e.data).splice.apply(n,[0,e.data.length].concat(Object(r.a)(data))),e.payload.page=m,e.payload.pageSize=_,e.payload.total=w,t.next=20;break;case 17:t.prev=17,t.t0=t.catch(4),console.log("DataTable fetch data error",t.t0);case 20:e.fetching=!1;case 21:case"end":return t.stop()}}),t,null,[[4,17]])})))()}}},_=n(4),component=Object(_.a)(y,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("CustomElSelect",e._b({ref:"select",attrs:{filterable:"",clearable:e.clearable,"filter-method":e.filterMethod,multiple:e.limit>1,"multiple-limit":e.limit,loading:e.fetching,"allow-create":!!e.crud.create,"default-first-option":!!e.crud.create},on:{change:e.handleChange,create:e.handleCreate},model:{value:e._value,callback:function(t){e._value=t},expression:"_value"}},"CustomElSelect",e.setting,!1),e._l(e.listOptions,(function(t,l){return n("SelectEntityOption",{key:e._.get(t,e.valueKey)||t.id||l,attrs:{value:e._.get(t,e.valueKey),label:e._.get(t,e.labelKey)}},[e._t("item",null,{item:t,context:this})],2)})),1)}),[],!1,null,"7d0a462f",null);t.default=component.exports;installComponents(component,{SelectEntityOption:n(804).default,CustomElSelect:n(802).default})},802:function(e,t,n){"use strict";n.r(t);n(64),n(294),n(199);var l={extends:n(34).Select,methods:{handleOptionSelect:function(option,e){var t=this;if(this.multiple){var n=(this.value||[]).slice(),l=this.getValueIndex(n,option.value);l>-1?n.splice(l,1):(this.multipleLimit<=0||n.length<this.multipleLimit)&&n.push(option.value),this.$emit("input",n),this.emitChange(n),option.created&&(this.query="",this.handleQueryChange(""),this.inputLength=20),this.filterable&&this.$refs.input.focus()}else option.created&&(this.query="",this.handleQueryChange(""),this.inputLength=20),this.$emit("input",option.value),this.emitChange(option.value),this.visible=!1;this.isSilentBlur=e,this.setSoftFocus(),this.visible||this.$nextTick((function(){t.scrollToOption(option)}))},selectOption:function(){this.visible?this.options[this.hoverIndex]&&(this.options[this.hoverIndex].created&&this.$emit("create",this.query,this.options[this.hoverIndex]),this.handleOptionSelect(this.options[this.hoverIndex])):this.toggleMenu()},selectOptionByValue:function(e){var option=this.cachedOptions.find((function(option){return option.value===e}));option&&this.handleOptionSelect(option)}}},o=n(4),component=Object(o.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleClose,expression:"handleClose"}],staticClass:"el-select",class:[e.selectSize?"el-select--"+e.selectSize:""],on:{click:function(t){return t.stopPropagation(),e.toggleMenu(t)}}},[e.multiple?n("div",{ref:"tags",staticClass:"el-select__tags",style:{"max-width":e.inputWidth-32+"px",width:"100%"}},[e.collapseTags&&e.selected.length?n("span",[n("el-tag",{attrs:{closable:!e.selectDisabled,size:e.collapseTagSize,hit:e.selected[0].hitState,type:"info","disable-transitions":""},on:{close:function(t){return e.deleteTag(t,e.selected[0])}}},[n("span",{staticClass:"el-select__tags-text"},[e._v("\n          "+e._s(e.selected[0].currentLabel)+"\n        ")])]),e._v(" "),e.selected.length>1?n("el-tag",{attrs:{closable:!1,size:e.collapseTagSize,type:"info","disable-transitions":""}},[n("span",{staticClass:"el-select__tags-text"},[e._v("+ "+e._s(e.selected.length-1))])]):e._e()],1):e._e(),e._v(" "),e.collapseTags?e._e():n("transition-group",{on:{"after-leave":e.resetInputHeight}},e._l(e.selected,(function(t){return n("el-tag",{key:e.getValueKey(t),attrs:{closable:!e.selectDisabled,size:e.collapseTagSize,hit:t.hitState,type:"info","disable-transitions":""},on:{close:function(n){return e.deleteTag(n,t)}}},[n("span",{staticClass:"el-select__tags-text"},[e._v(e._s(t.currentLabel))])])})),1),e._v(" "),e.filterable?n("input",{directives:[{name:"model",rawName:"v-model",value:e.query,expression:"query"}],ref:"input",staticClass:"el-select__input",class:[e.selectSize?"is-"+e.selectSize:""],style:{"flex-grow":"1",width:e.inputLength/(e.inputWidth-32)+"%","max-width":e.inputWidth-42+"px"},attrs:{type:"text",disabled:e.selectDisabled,autocomplete:e.autoComplete||e.autocomplete},domProps:{value:e.query},on:{focus:e.handleFocus,blur:function(t){e.softFocus=!1},keyup:e.managePlaceholder,keydown:[e.resetInputState,function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:(t.preventDefault(),e.navigateOptions("next"))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:(t.preventDefault(),e.navigateOptions("prev"))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.selectOption(t))},function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;t.stopPropagation(),t.preventDefault(),e.visible=!1},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"delete",[8,46],t.key,["Backspace","Delete","Del"])?null:e.deletePrevTag(t)},function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"tab",9,t.key,"Tab"))return null;e.visible=!1}],compositionstart:e.handleComposition,compositionupdate:e.handleComposition,compositionend:e.handleComposition,input:[function(t){t.target.composing||(e.query=t.target.value)},e.debouncedQueryChange]}}):e._e()],1):e._e(),e._v(" "),n("el-input",{ref:"reference",class:{"is-focus":e.visible},attrs:{id:e.id,type:"text",placeholder:e.currentPlaceholder,name:e.name,autocomplete:e.autoComplete||e.autocomplete,size:e.selectSize,disabled:e.selectDisabled,readonly:e.readonly,"validate-event":!1,tabindex:e.multiple&&e.filterable?"-1":null},on:{focus:e.handleFocus,blur:e.handleBlur},nativeOn:{keyup:function(t){return e.debouncedOnInputChange(t)},keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:(t.stopPropagation(),t.preventDefault(),e.navigateOptions("next"))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:(t.stopPropagation(),t.preventDefault(),e.navigateOptions("prev"))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.selectOption(t))},function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;t.stopPropagation(),t.preventDefault(),e.visible=!1},function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"tab",9,t.key,"Tab"))return null;e.visible=!1}],paste:function(t){return e.debouncedOnInputChange(t)},mouseenter:function(t){e.inputHovering=!0},mouseleave:function(t){e.inputHovering=!1}},model:{value:e.selectedLabel,callback:function(t){e.selectedLabel=t},expression:"selectedLabel"}},[e.$slots.prefix?n("template",{slot:"prefix"},[e._t("prefix")],2):e._e(),e._v(" "),n("template",{slot:"suffix"},[n("i",{directives:[{name:"show",rawName:"v-show",value:!e.showClose,expression:"!showClose"}],class:["el-select__caret","el-input__icon","el-icon-"+e.iconClass]}),e._v(" "),e.showClose?n("i",{staticClass:"el-select__caret el-input__icon el-icon-circle-close",on:{click:e.handleClearClick}}):e._e()])],2),e._v(" "),n("transition",{attrs:{name:"el-zoom-in-top"},on:{"before-enter":e.handleMenuEnter,"after-leave":e.doDestroy}},[n("el-select-menu",{directives:[{name:"show",rawName:"v-show",value:e.visible&&!1!==e.emptyText,expression:"visible && emptyText !== false"}],ref:"popper",attrs:{"append-to-body":e.popperAppendToBody}},[n("el-scrollbar",{directives:[{name:"show",rawName:"v-show",value:e.options.length>0&&!e.loading,expression:"options.length > 0 && !loading"}],ref:"scrollbar",class:{"is-empty":!e.allowCreate&&e.query&&0===e.filteredOptionsCount},attrs:{tag:"ul","wrap-class":"el-select-dropdown__wrap","view-class":"el-select-dropdown__list"}},[e.showNewOption?n("el-option",{attrs:{value:e.query,created:""}},[n("icon",{attrs:{name:"el-icon-plus"}}),e._v("\n          "+e._s(e.query)+"\n        ")],1):e._e(),e._v(" "),e._t("default")],2),e._v(" "),e.emptyText&&(!e.allowCreate||e.loading||e.allowCreate&&0===e.options.length)?[e.$slots.empty?e._t("empty"):n("p",{staticClass:"el-select-dropdown__empty"},[e._v("\n          "+e._s(e.emptyText)+"\n        ")])]:e._e()],2)],1)],1)}),[],!1,null,"2ed420cc",null);t.default=component.exports;installComponents(component,{Icon:n(198).default})},803:function(e,t,n){"use strict";n.r(t);var l={props:{to:String},data:function(){return{teleportTo:null}},watch:{to:function(){this.teleport()}},mounted:function(){this.teleport()},beforeDestroy:function(){this.removeTeleport()},methods:{teleport:function(){if(this.removeTeleport(),this.to&&(this.teleportTo=document.querySelector(this.to),this.teleportTo)){try{this.$parent.$el.removeChild(this.$el)}catch(e){}this.teleportTo.appendChild(this.$el)}},removeTeleport:function(){if(this.teleportTo)try{this.teleportTo.removeChild(this.$el)}catch(e){}}}},o=n(4),component=Object(o.a)(l,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"teleport"},[e._t("default")],2)}),[],!1,null,null,null);t.default=component.exports},804:function(e,t,n){"use strict";n.r(t);var l={extends:n(34).Option},o=n(4),component=Object(o.a)(l,undefined,undefined,!1,null,"0f4d31b3",null);t.default=component.exports},806:function(e,t,n){var content=n(816);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(33).default)("0565f0ab",content,!0,{sourceMap:!1})},815:function(e,t,n){"use strict";n(806)},816:function(e,t,n){var l=n(32)(!1);l.push([e.i,".tox-notifications-container{display:none}.app-editor{display:inline-block}.app-editor .tox-toolbar__primary{background:#fff!important;border-bottom:1px solid #ccc!important}.app-editor .tox-toolbar__primary .tox-tbtn{height:var(--toolbar-size)}",""]),e.exports=l},818:function(e,t,n){"use strict";n.r(t);var l={name:"FormSelect",extends:n(34).Select,props:{selectOptions:{type:Array,default:function(){return[]}}}},o=n(4),component=Object(o.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleClose,expression:"handleClose"}],staticClass:"el-select",class:[e.selectSize?"el-select--"+e.selectSize:""],on:{click:function(t){return t.stopPropagation(),e.toggleMenu(t)}}},[e.multiple?n("div",{ref:"tags",staticClass:"el-select__tags",style:{"max-width":e.inputWidth-32+"px",width:"100%"}},[e.collapseTags&&e.selected.length?n("span",[n("el-tag",{attrs:{closable:!e.selectDisabled,size:e.collapseTagSize,hit:e.selected[0].hitState,type:"info","disable-transitions":""},on:{close:function(t){return e.deleteTag(t,e.selected[0])}}},[n("span",{staticClass:"el-select__tags-text"},[e._v("\n          "+e._s(e.selected[0].currentLabel)+"\n        ")])]),e._v(" "),e.selected.length>1?n("el-tag",{attrs:{closable:!1,size:e.collapseTagSize,type:"info","disable-transitions":""}},[n("span",{staticClass:"el-select__tags-text"},[e._v("+ "+e._s(e.selected.length-1))])]):e._e()],1):e._e(),e._v(" "),e.collapseTags?e._e():n("transition-group",{on:{"after-leave":e.resetInputHeight}},e._l(e.selected,(function(t){return n("el-tag",{key:e.getValueKey(t),attrs:{closable:!e.selectDisabled,size:e.collapseTagSize,hit:t.hitState,type:"info","disable-transitions":""},on:{close:function(n){return e.deleteTag(n,t)}}},[n("span",{staticClass:"el-select__tags-text"},[e._v(e._s(t.currentLabel))])])})),1),e._v(" "),e.filterable?n("input",{directives:[{name:"model",rawName:"v-model",value:e.query,expression:"query"}],ref:"input",staticClass:"el-select__input",class:[e.selectSize?"is-"+e.selectSize:""],style:{"flex-grow":"1",width:e.inputLength/(e.inputWidth-32)+"%","max-width":e.inputWidth-42+"px"},attrs:{type:"text",disabled:e.selectDisabled,autocomplete:e.autoComplete||e.autocomplete},domProps:{value:e.query},on:{focus:e.handleFocus,blur:function(t){e.softFocus=!1},keyup:e.managePlaceholder,keydown:[e.resetInputState,function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:(t.preventDefault(),e.navigateOptions("next"))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:(t.preventDefault(),e.navigateOptions("prev"))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.selectOption(t))},function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;t.stopPropagation(),t.preventDefault(),e.visible=!1},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"delete",[8,46],t.key,["Backspace","Delete","Del"])?null:e.deletePrevTag(t)},function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"tab",9,t.key,"Tab"))return null;e.visible=!1}],compositionstart:e.handleComposition,compositionupdate:e.handleComposition,compositionend:e.handleComposition,input:[function(t){t.target.composing||(e.query=t.target.value)},e.debouncedQueryChange]}}):e._e()],1):e._e(),e._v(" "),n("el-input",{ref:"reference",class:{"is-focus":e.visible},attrs:{id:e.id,type:"text",placeholder:e.currentPlaceholder,name:e.name,autocomplete:e.autoComplete||e.autocomplete,size:e.selectSize,disabled:e.selectDisabled,readonly:e.readonly,"validate-event":!1,tabindex:e.multiple&&e.filterable?"-1":null},on:{focus:e.handleFocus,blur:e.handleBlur},nativeOn:{keyup:function(t){return e.debouncedOnInputChange(t)},keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:(t.stopPropagation(),t.preventDefault(),e.navigateOptions("next"))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:(t.stopPropagation(),t.preventDefault(),e.navigateOptions("prev"))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.selectOption(t))},function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;t.stopPropagation(),t.preventDefault(),e.visible=!1},function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"tab",9,t.key,"Tab"))return null;e.visible=!1}],paste:function(t){return e.debouncedOnInputChange(t)},mouseenter:function(t){e.inputHovering=!0},mouseleave:function(t){e.inputHovering=!1}},model:{value:e.selectedLabel,callback:function(t){e.selectedLabel=t},expression:"selectedLabel"}},[e.$slots.prefix?n("template",{slot:"prefix"},[e._t("prefix")],2):e._e(),e._v(" "),n("template",{slot:"suffix"},[n("i",{directives:[{name:"show",rawName:"v-show",value:!e.showClose,expression:"!showClose"}],class:["el-select__caret","el-input__icon","el-icon-"+e.iconClass]}),e._v(" "),e.showClose?n("i",{staticClass:"el-select__caret el-input__icon el-icon-circle-close",on:{click:e.handleClearClick}}):e._e()])],2),e._v(" "),n("transition",{attrs:{name:"el-zoom-in-top"},on:{"before-enter":e.handleMenuEnter,"after-leave":e.doDestroy}},[n("el-select-menu",{directives:[{name:"show",rawName:"v-show",value:e.visible&&!1!==e.emptyText,expression:"visible && emptyText !== false"}],ref:"popper",attrs:{"append-to-body":e.popperAppendToBody}},[n("el-scrollbar",{directives:[{name:"show",rawName:"v-show",value:e.options.length>0&&!e.loading,expression:"options.length > 0 && !loading"}],ref:"scrollbar",class:{"is-empty":!e.allowCreate&&e.query&&0===e.filteredOptionsCount},attrs:{tag:"ul","wrap-class":"el-select-dropdown__wrap","view-class":"el-select-dropdown__list"}},[e.showNewOption?n("el-option",{attrs:{value:e.query,created:""}}):e._e(),e._v(" "),e._t("default",e._l(e.selectOptions,(function(option,e){return n("el-option",{key:option.value||e,attrs:{value:option.value,label:option.label}})})))],2),e._v(" "),e.emptyText&&(!e.allowCreate||e.loading||e.allowCreate&&0===e.options.length)?[e.$slots.empty?e._t("empty"):n("p",{staticClass:"el-select-dropdown__empty"},[e._v("\n          "+e._s(e.emptyText)+"\n        ")])]:e._e()],2)],1)],1)}),[],!1,null,"f0b65a88",null);t.default=component.exports},819:function(e,t,n){"use strict";n.r(t);var l=n(801),o=n(799),r={components:{SelectEntity:l.default},props:{value:{type:Object,default:function(){return{provinceCode:null,districtCode:null,wardCode:null,street:"",text:"",isPrimary:!1}}},fields:{type:Array,default:function(){return["provice","district","ward","street","name","phone","primary"]}},props:{type:Object,default:function(){return{}}}},data:function(){return{editValue:{provinceCode:null,districtCode:null,wardCode:null,street:"",text:"",isPrimary:!1},selectProvinceConfig:{service:this.$services.Location,valueKey:"code",payload:{search:"",pageSize:100},selectProps:{clearable:!0,placeholder:"Chọn tỉnh, thành phố"}},selectDistrictConfig:{service:this.$services.Location,valueKey:"code",payload:{search:"",pageSize:100,query:{provinceCode:void 0}},selectProps:{clearable:!0,placeholder:"Chọn quận, huyện",disabled:!1}},selectWardConfig:{service:this.$services.Location,valueKey:"code",payload:{search:"",pageSize:100,query:{districtCode:void 0}},selectProps:{clearable:!0,placeholder:"Chọn phường, xã",disabled:!1}}}},computed:{_selectProvinceConfig:function(){return o.a.merge(this.selectProvinceConfig,{payload:{query:{type:"province"}},selectProps:{placeholder:"Chọn tỉnh, thành phố"}})},_selectDistrictConfig:function(){return o.a.merge(this.selectDistrictConfig,{payload:{query:{type:"district",provinceCode:this.editValue.provinceCode}},selectProps:{disabled:!this.editValue.provinceCode}})},_selectWardConfig:function(){return o.a.merge(this.selectWardConfig,{payload:{query:{type:"ward",districtCode:this.editValue.districtCode}},selectProps:{disabled:!this.editValue.provinceCode||!this.editValue.districtCode}})}},created:function(){this.value?this.editValue=this.value:this.$emit("input",this.editValue)},methods:{handleChangeProvince:function(){var e=this;console.log("handleChangeProvince"),this.editValue.districtCode=null,this.editValue.wardCode=null,this.$emit("input",this.editValue),this.$nextTick((function(){var t;null===(t=e.$refs.selectDistrict)||void 0===t||t.fetchData()}))},handleChangeDistrict:function(){var e=this;this.editValue.wardCode=null,this.$emit("input",this.editValue),this.$nextTick((function(){var t;null===(t=e.$refs.selectWard)||void 0===t||t.fetchData()}))},handleChangeWard:function(){this.$emit("input",this.editValue)}}},c=n(4),component=Object(c.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-row",{attrs:{gutter:12}},[n("el-col",{attrs:{md:12}},[e.fields.includes("provice")?n("el-form-item",{attrs:{label:"Tỉnh/Thành phố"}},[n("SelectEntity",e._b({staticClass:"w-full",on:{change:e.handleChangeProvince},model:{value:e.editValue.provinceCode,callback:function(t){e.$set(e.editValue,"provinceCode",t)},expression:"editValue.provinceCode"}},"SelectEntity",e._selectProvinceConfig,!1))],1):e._e()],1),e._v(" "),n("el-col",{attrs:{md:12}},[e.fields.includes("district")?n("el-form-item",{attrs:{label:"Quyện/Huyện"}},[n("SelectEntity",e._b({ref:"selectDistrict",staticClass:"w-full",attrs:{"select-props":e._selectDistrictConfig.selectProps},on:{change:e.handleChangeDistrict},model:{value:e.editValue.districtCode,callback:function(t){e.$set(e.editValue,"districtCode",t)},expression:"editValue.districtCode"}},"SelectEntity",e._selectDistrictConfig,!1))],1):e._e()],1),e._v(" "),n("el-col",{attrs:{md:12}},[e.fields.includes("ward")?n("el-form-item",{attrs:{label:"Xã/Phường"}},[n("SelectEntity",e._b({ref:"selectWard",staticClass:"w-full",on:{change:e.handleChangeWard},model:{value:e.editValue.wardCode,callback:function(t){e.$set(e.editValue,"wardCode",t)},expression:"editValue.wardCode"}},"SelectEntity",e._selectWardConfig,!1))],1):e._e()],1),e._v(" "),n("el-col",[e.fields.includes("street")?n("el-form-item",{attrs:{label:"Địa chỉ"}},[n("el-input",{attrs:{type:"textarea"},model:{value:e.editValue.street,callback:function(t){e.$set(e.editValue,"street",t)},expression:"editValue.street"}})],1):e._e()],1),e._v(" "),n("el-col",{attrs:{md:12}},[e.fields.includes("name")?n("el-form-item",{attrs:{label:"Tên",prop:e.props.name}},[n("el-input",{model:{value:e.editValue.name,callback:function(t){e.$set(e.editValue,"name",t)},expression:"editValue.name"}})],1):e._e()],1),e._v(" "),n("el-col",{attrs:{md:12}},[e.fields.includes("phone")?n("el-form-item",{attrs:{label:"Số điện thoại",prop:e.props.phone}},[n("el-input",{model:{value:e.editValue.phone,callback:function(t){e.$set(e.editValue,"phone",t)},expression:"editValue.phone"}})],1):e._e()],1),e._v(" "),n("el-col",[e.fields.includes("primary")?n("el-checkbox",{attrs:{label:"Đặt làm mặc định"},model:{value:e.editValue.isPrimary,callback:function(t){e.$set(e.editValue,"isPrimary",t)},expression:"editValue.isPrimary"}}):e._e()],1)],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{SelectEntity:n(801).default})},820:function(e,t,n){"use strict";n.r(t);n(20),n(12),n(25),n(38),n(39);var l=n(7),o=(n(473),n(81),n(297),n(298),n(116),n(17),n(40),n(41),n(827),n(113),n(13),n(834)),r=n(800);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function d(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){Object(l.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var f={name:"TinymceEditor",components:{editor:o.a,MediaPicker:r.default},props:{value:String,toolbarSize:{validator:function(e){return"small"===e||"normal"===e},default:"normal"},placeholder:String,options:{type:Object,default:function(){return{}}},disabled:{type:Boolean,default:!1}},data:function(){var e=this;return{selectedImage:[],init:d({max_height:600,menubar:!1,toolbar_mode:"sliding",plugins:["advlist autolink lists link image charmap print preview anchor media advcode","searchreplace visualblocks code fullscreen","insertdatetime media table paste code wordcount a11ychecker tabfocus"],toolbar:["fullscreen preview formatselect fontselect bold italic forecolor backcolor","alignleft aligncenter alignright alignjustify","table bullist numlist outdent indent removeformat image mediapicker media undo redo code"].join(" ").split(" ").join("|"),font_formats:"Andale Mono=andale mono,times; Arial=arial,helvetica,sans-serif; Arial Black=arial black,avant garde; Book Antiqua=book antiqua,palatino; Comic Sans MS=comic sans ms,sans-serif; Courier New=courier new,courier; Georgia=georgia,palatino; Helvetica=helvetica; Impact=impact,chicago; Symbol=symbol; Tahoma=tahoma,arial,helvetica,sans-serif; Terminal=terminal,monaco; Times New Roman=times new roman,times; Trebuchet MS=trebuchet ms,geneva; Verdana=verdana,geneva; Webdings=webdings; Wingdings=wingdings,zapf dingbats",paste_preprocess:function(e,data){if(console.log(e,data.content),data.content){if(data.content.startsWith("https://youtu.be")){var t=data.content.replace("https://youtu.be","https://www.youtube.com/embed");return void(data.content='<iframe width="560" height="315" src="'.concat(t,'" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>'))}if(data.content.startsWith("https://www.youtube.com/watch")){var n=new URL(data.content).searchParams.get("v"),l="https://www.youtube.com/embed/".concat(n);return void(data.content='<iframe width="560" height="315" src="'.concat(l,'" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>'))}(data.content.startsWith("https:")||data.content.startsWith("http:"))&&(data.content='<a href="'.concat(data.content,'">').concat(data.content,"</a>"))}},lists_indent_on_tab:!0,content_css:"/css/tinymce.css",images_upload_handler:this.imageUploadHandler,image_caption:!0,image_advtab:!0,a11y_advanced_options:!0,resize_img_proportional:!1,paste_data_images:!0,image_dimensions:!1,automatic_uploads:!0,file_picker_callback:this.filePickerHandler,image_class_list:[{title:"Width: 100%",value:"image__w-full"},{title:"Width: 50%",value:"image__w-50pt"},{title:"Width: auto",value:"image__w-auto"}],setup:function(t){e.$emit("setup",t),e.editor=t,t.on("ObjectResized",e.handleImageResized),t.on("keydown",e.handleEditorKeydown),t.ui.registry.addButton("mediapicker",{text:"",icon:"image",onAction:function(){e.$refs.mediaPicker.showDialog()}})},init_instance_callback:function(t){e.$emit("init-instance",t),t.dom.doc.addEventListener("dblclick",e.handleEditorContainerDblclick)},placeholder:this.placeholder,branding:!1,elementpath:!1,statusbar:!0,resize:!0},this.options),editor:null,previewKeyDown:null,active:!0}},computed:{_value:{get:function(){return this.value},set:function(e){return this.$emit("input",e)}}},methods:{imageUploadHandler:function(e,t,n,progress){this.$services.Media.upload(this.$axios,e.blob(),progress,(function(e){return n(e.message)})).then((function(e){t(e[0].url)}))},handleImageResized:function(e){e.target.classList.value=e.target.classList.value.replace(/(^| )image__w-\w*/g,""),e.target.classList.add("resized")},handleEditorContainerDblclick:function(e){"IMG"===e.target.tagName&&window.open(e.target.getAttribute("src"),"_blank")},handleEditorKeydown:function(e){var t=this;"Tab"===e.code&&"Minus"===this.previewKeyDown?(e.preventDefault(),this.$nextTick((function(){t.editor.execCommand("Delete"),t.editor.execCommand("InsertOrderedList",!1,{"list-style-type":"decimal"})}))):"Tab"===e.code&&"Period"===this.previewKeyDown&&(e.preventDefault(),this.$nextTick((function(){t.editor.execCommand("Delete"),t.editor.execCommand("InsertUnorderedList",!0,{"list-style-type":"disc"})}))),this.previewKeyDown=e.code},reload:function(){var e=this;this.active=!1,this.$nextTick((function(){e.active=!0}))},handleInsertImage:function(e){var t=this;(Array.isArray(e)?e:[e]).forEach((function(e){return t.editor.insertContent('<img src="'.concat(e.url,'" alt="').concat(e.alt,'" title="').concat(e.title,'" />'))})),this.$nextTick((function(){t.selectedImage=[],t.$refs.mediaPicker.closeDialog()}))}}},h=(n(815),n(4)),component=Object(h.a)(f,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-editor",style:{"--toolbar-size":{small:"24px",normal:"34px"}[e.toolbarSize]}},[e.active?n("editor",{attrs:{"init-value":e.value,init:e.init,disabled:e.disabled},model:{value:e._value,callback:function(t){e._value=t},expression:"_value"}}):e._e(),e._v(" "),n("MediaPicker",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"mediaPicker",attrs:{limit:100},on:{input:e.handleInsertImage},model:{value:e.selectedImage,callback:function(t){e.selectedImage=t},expression:"selectedImage"}})],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{MediaPicker:n(800).default})},821:function(e,t,n){"use strict";n.r(t);n(64),n(17),n(296);var l=n(800),o={components:{Teleport:n(803).default,MediaPicker:l.default},inject:{elForm:{default:null},elFormItem:{default:null}},props:{value:{type:Object}},data:function(){return{cId:"seo-"+Math.random().toString(36).slice(2)}},watch:{value:function(){this.$emit("input",this.value)}},created:function(){this.value||this.$emit("input",{title:"",description:"",image:null,keywords:[]})}},r=n(4),component=Object(r.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.value?n("div",{staticClass:"seo w-full inline-block",attrs:{id:e.cId}},[e.elFormItem?n("div",{attrs:{id:"content"}}):n("el-collapse",[n("el-collapse-item",{attrs:{title:"SEO Setting"}},[e.elForm?n("div",{attrs:{id:"content"}}):n("el-form",{attrs:{id:"content"}})],1)],1),e._v(" "),n("Teleport",{attrs:{to:".seo#"+e.cId+" #content"}},[n("el-form-item",{attrs:{label:"Title"}},[n("el-input",{model:{value:e.value.title,callback:function(t){e.$set(e.value,"title",t)},expression:"value.title"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"Description"}},[n("el-input",{attrs:{type:"textarea",autosize:{minRows:2}},model:{value:e.value.description,callback:function(t){e.$set(e.value,"description",t)},expression:"value.description"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"Từ khóa",prop:"keywords"}},[n("el-select",{staticClass:"w-full",attrs:{"allow-create":"","default-first-option":"",filterable:"",multiple:""},model:{value:e.value.keywords,callback:function(t){e.$set(e.value,"keywords",t)},expression:"value.keywords"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"Image"}},[n("MediaPicker",{model:{value:e.value.image,callback:function(t){e.$set(e.value,"image",t)},expression:"value.image"}})],1)],1)],1):e._e()}),[],!1,null,"12fa5bff",null);t.default=component.exports;installComponents(component,{MediaPicker:n(800).default,Teleport:n(803).default})},822:function(e,t,n){"use strict";n.r(t);var l={extends:n(34).Input,props:{value:{}},computed:{nativeInputValue:function(){if(!this.value)return"";try{return JSON.stringify(this.value,null,2)}catch(e){}return""}},methods:{handleInput:function(e){},handleBlur:function(e){var t;this.focused=!1,this.$emit("blur",e);try{t=JSON.parse(e.target.value),this.$emit("input",t),this.setNativeInputValue()}catch(e){console.log(e)}this.validateEvent&&this.dispatch("ElFormItem","el.form.blur",[this.value])}}},o=n(4),component=Object(o.a)(l,undefined,undefined,!1,null,"9c916746",null);t.default=component.exports},829:function(e,t,n){"use strict";n.r(t);n(20),n(12),n(25),n(38),n(39);var l=n(7),o=(n(115),n(13),n(17),n(835),n(471),n(841)),r=n(836),c=n(818),d=n(822),f=n(830),h=n(801),m=n(819),v=n(820),y=n(800),_=n(821),k=(n(837),n(799));function w(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function C(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?w(Object(source),!0).forEach((function(t){Object(l.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):w(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var x={components:{PrismEditor:r.a,VueJsonEditor:o.a,FormSelect:c.default,InputNumber:f.default,SelectEntity:h.default,AddressEdit:m.default,FormMixed:d.default,TinymceEditor:v.default,MediaPicker:y.default,Seo:_.default},props:{data:{type:Object,default:function(){}},fields:{type:Array,default:function(){return[]}}},data:function(){return{form:{}}},computed:{computedFields:function(){var e=this;return this.fields.map((function(t){return C(C({},k.b.getSourceValue(t,e.form)),e.fieldTemplate(t))}))}},created:function(){var e=this;this.form=C({},this.data),this.form.id||this.fields.forEach((function(t){"default"in t&&t.default&&(e.form[t.prop]=t.default)}))},methods:{fieldTemplate:function(e){var t,n={Seo:{component:"Seo"},Checkbox:{component:"ElCheckbox"},Select:{component:"FormSelect"},Address:{component:"AddressEdit"},RichText:{component:"TinymceEditor",props:{style:{width:"100%"}}},MediaPicker:{component:"MediaPicker",props:C({limit:"Array"===e.type?100:1},e.props)},SelectEntity:{component:"SelectEntity",props:C(C({limit:"Array"===e.type?100:1},e.props),{},{clearable:!e.required})},JSON:{component:"VueJsonEditor",props:{mode:"code"}}};return n[null===(t=e.ui)||void 0===t?void 0:t.type]||n[e.type]||{}},validate:function(){var e=this;return new Promise((function(t){e.$refs.form.validate((function(e){return t(e)}))}))},validateField:function(e){return this.$refs.form.validateField(e)},clearValidate:function(e){this.$refs.form.clearValidate(e)},resetFields:function(){this.$refs.form.resetFields()},getCol:function(col){return Number.isInteger(col)?{span:col}:col||{}}}},O=n(4),component=Object(O.a)(x,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dynamic-form"},[n("el-form",{ref:"form",attrs:{model:e.form}},[n("el-row",{attrs:{gutter:12}},e._l(e.computedFields,(function(t){return n("el-col",e._b({key:t.prop},"el-col",e.getCol(t.col),!1),["none"===t.wrap?n(t.component,e._b({tag:"component",model:{value:e.form[t.prop],callback:function(n){e.$set(e.form,t.prop,n)},expression:"form[field.prop]"}},"component",t.props,!1,!0)):"collapse"===t.wrap?n("el-collapse",[n("el-collapse-item",{attrs:{title:t.label}},[n(t.component,e._b({tag:"component",model:{value:e.form[t.prop],callback:function(n){e.$set(e.form,t.prop,n)},expression:"form[field.prop]"}},"component",t.props,!1,!0))],1)],1):n("el-form-item",e._b({key:t.prop,attrs:{label:t.label,prop:t.prop,rules:t.rules}},"el-form-item",e.form.formItemProps,!1),[n(t.component,e._b({key:t.prop,tag:"component",model:{value:e.form[t.prop],callback:function(n){e.$set(e.form,t.prop,n)},expression:"form[field.prop]"}},"component",t.props,!1,!0))],1)],1)})),1)],1)],1)}),[],!1,null,"989bc47c",null);t.default=component.exports}}]);